(this["webpackJsonpparticipant-app"]=this["webpackJsonpparticipant-app"]||[]).push([[0],{41:function(t,e,a){t.exports=a(73)},45:function(t,e,a){},46:function(t,e,a){},71:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(19),p=a.n(s),i=(a(45),a(46),a(20)),o=a(2),c=a(13),u=a(9),l=a(39),h=a(40),m=a(8),b=(a(51),{exptToDisplay:{},participantID:"",questionKeys:[],isFinalQ:!1,answer:[]}),y=Object(u.c)({expt:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_EXPT":return Object(m.a)(Object(m.a)({},t),{},{exptToDisplay:e.payload});case"PART_ID":return Object(m.a)(Object(m.a)({},t),{},{participantID:e.payload});case"Q_KEYS":return Object(m.a)(Object(m.a)({},t),{},{questionKeys:e.payload});case"FINAL_Q":return Object(m.a)(Object(m.a)({},t),{},{isFinalQ:e.payload});case"ANSWER":return Object(m.a)(Object(m.a)({},t),{},{answer:[].concat(Object(h.a)(t.answer),[e.payload])});default:return t}}}),v=[l.a],x=Object(u.e)(y,{},Object(u.d)(u.a.apply(void 0,v))),f=a(17),E=a(11),d=a(12),g=a(10),j=a(15),O=a(14),D=a(18),k=a.n(D),w=function(t,e,a){return function(n){var r="https://test-api-615.herokuapp.com/api/feedback/"+t+"/info/studyName-"+e;k.a.get(r).then((function(t){var e=t.data.experiments,r={};e.forEach((function(t){t.exptName==a&&(r=t)})),n({type:"GET_EXPT",payload:r}),console.log("dispatched")}))}},I=function(t,e,a){return function(n){var r="https://test-api-615.herokuapp.com/api/feedback/"+t+"/"+e;k.a.post(r,a).then((function(t){console.log(t)}))}},S=function(t){return function(e){e({type:"FINAL_Q",payload:t})}},N=function(t){Object(j.a)(a,t);var e=Object(O.a)(a);function a(t){var n;return Object(E.a)(this,a),(n=e.call(this,t)).state={ParticipantID:""},n.onChange=n.onChange.bind(Object(g.a)(n)),n.showExpt=n.showExpt.bind(Object(g.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt.split("-")[0],a=this.props.match.params.expt.split("-")[1];this.props.getExpt(t,e,a)}},{key:"onChange",value:function(t){this.setState(Object(f.a)({},t.target.name,t.target.value))}},{key:"showExpt",value:function(){this.props.storePartID(this.state.ParticipantID);var t=this.props.match.params.username,e=this.props.match.params.expt,a=[];this.props.expt.exptToDisplay&&(a=Object.keys(this.props.expt.exptToDisplay).filter((function(t){return"q"==t.charAt(0)})),this.props.storeQKeys(a));console.log(a),1==a.length&&this.props.isFinalQ(!0),this.props.history.push("/"+t+"/"+e+"/"+a[0])}},{key:"render",value:function(){var t=this.props.match.params.expt;return r.a.createElement("div",{className:"container"},"Experiment name: ",r.a.createElement("br",null),r.a.createElement("b",null,t),r.a.createElement("br",null),r.a.createElement("br",null),"Enter your unique ID: ",r.a.createElement("p",null),r.a.createElement("input",{type:"text",name:"ParticipantID",value:this.state.ParticipantID,onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn",value:"Start Experiment",onClick:this.showExpt}),r.a.createElement("br",null),r.a.createElement("br",null),"Note: once you submit your answer for one question, you won't be able to change it.")}}]),a}(n.Component),q=Object(c.b)((function(t){return{expt:t.expt,participantID:t.participantID}}),{storePartID:function(t){return function(e){e({type:"PART_ID",payload:t})}},getExpt:w,storeQKeys:function(t){return function(e){e({type:"Q_KEYS",payload:t})}},isFinalQ:S})(N),C=function(t){Object(j.a)(a,t);var e=Object(O.a)(a);function a(){return Object(E.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"This is the home page"))}}]),a}(n.Component),T=(a(71),function(t){Object(j.a)(a,t);var e=Object(O.a)(a);function a(t){var n;return Object(E.a)(this,a),(n=e.call(this,t)).state={value:0},n.onChange=n.onChange.bind(Object(g.a)(n)),n.onSubmit=n.onSubmit.bind(Object(g.a)(n)),n.onFinalSubmit=n.onFinalSubmit.bind(Object(g.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getData();var t=this.props.match.params.username,e=this.props.match.params.expt;this.props.expt.participantID||(alert("Please enter your unique ID"),this.props.history.push("/"+t+"/"+e))}},{key:"onChange",value:function(t){this.setState(Object(f.a)({},t.target.name,t.target.value))}},{key:"onSubmit",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt,a=this.props.match.params.qKey.charAt(1),n=Number(a)+1,r=this.props.expt.questionKeys[this.props.expt.questionKeys.length-1];n==Number(r.charAt(1))&&this.props.isFinalQ(!0);var s=this.props.expt.exptToDisplay[this.props.match.params.qKey].Question;this.props.storeAnswer(s,this.state.value),this.props.history.push("/"+t+"/"+e+"/q"+n.toString());var p=this.props.expt.exptToDisplay["q"+n.toString()].lowRange;this.setState({value:p})}},{key:"onFinalSubmit",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt,a=this.props.expt.exptToDisplay[this.props.match.params.qKey].Question;this.props.storeAnswer(a,this.state.value),this.props.history.push("/"+t+"/"+e+"/success")}},{key:"getData",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt.split("-")[0],a=this.props.match.params.expt.split("-")[1];this.props.getExpt(t,e,a)}},{key:"displayExpt",value:function(){var t=this.props.expt.exptToDisplay,e=this.props.match.params.qKey;if(t[e]&&"slider"==t[e].Type){var a=t[e].lowRange,n=t[e].highRange,s=t[e].Question;return r.a.createElement("div",{className:"container"},s," ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",min:a,max:n,name:"value",value:this.state.value,onChange:this.onChange}),this.state.value,r.a.createElement("br",null),this.props.expt.isFinalQ?r.a.createElement("div",null,"This is the final question. ",r.a.createElement("p",null),r.a.createElement("input",{type:"submit",className:"btn",value:"Submit",onClick:this.onFinalSubmit})):r.a.createElement("input",{type:"submit",className:"btn",value:"Confirm and Next Question",onClick:this.onSubmit}))}}},{key:"sendData",value:function(t){var e="https://test-api-615.herokuapp.com/api/feedback/"+this.props.match.params.username+"/"+this.props.match.params.expt;k.a.post(e,t).then((function(t){console.log(t),alert("You have successfully submitted your response.")}))}},{key:"render",value:function(){var t=this.props.match.params.expt,e=this.props.expt.participantID;return r.a.createElement("div",{className:"container"},"Experiment name: ",r.a.createElement("br",null),r.a.createElement("b",null,t),r.a.createElement("br",null),"Participant ID: ",r.a.createElement("br",null),r.a.createElement("b",null,e),r.a.createElement("br",null),r.a.createElement("br",null),this.displayExpt())}}]),a}(n.Component)),Q=Object(c.b)((function(t){return{expt:t.expt,participantID:t.participantID}}),{getExpt:w,sendExpt:I,isFinalQ:S,storeAnswer:function(t,e){return function(a){a({type:"ANSWER",payload:{que:t,ans:e}})}}})(T),A=function(t){Object(j.a)(a,t);var e=Object(O.a)(a);function a(){return Object(E.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props);var t=this.props.match.params.username,e=this.props.match.params.expt;if(0==!this.props.expt.answer.length){var a={participantID:this.props.expt.participantID};this.props.expt.answer.map((function(t){a[t.que]=t.ans})),this.props.sendExpt(t,e,a)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Thank you for your submission!"))}}]),a}(n.Component),F=Object(c.b)((function(t){return{expt:t.expt}}),{sendExpt:I})(A);var K=function(){return r.a.createElement(c.a,{store:x},r.a.createElement(i.a,{basename:"/participant-app/"},r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{exact:!0,path:"/",component:C}),r.a.createElement(o.a,{exact:!0,path:"/:username/:expt/success",component:F}),r.a.createElement(o.a,{exact:!0,path:"/:username/:expt",component:q}),r.a.createElement(o.a,{exact:!0,path:"/:username/:expt/:qKey",component:Q}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.01f41fdb.chunk.js.map