{"version":3,"sources":["reducers/dataReducer.js","reducers/index.js","actions/types.js","store.js","actions/dataActions.js","components/EnterID.js","components/HomePage.js","items/Slider.js","items/StaticText.js","items/NormalCurve.jsx","items/NormalCurveSurvey.jsx","items/Histogram.js","components/Experiment.js","components/Success.js","components/PreviewEnterID.js","components/PreviewExpt.js","components/PreviewSuccess.js","App.js","serviceWorker.js","index.js"],"names":["initialState","dbInfo","exptToDisplay","participantID","questionKeys","numQ","Number","isFinalQ","answer","fileContent","combineReducers","expt","state","action","type","payload","middleware","thunk","store","createStore","rootReducer","compose","applyMiddleware","storeDBInfo","which_database","which_collection","dispatch","db","col","getExpt","which_db","study_name","expt_name","API_URL","axios","get","then","res","experiments","data","thisExpt","forEach","element","exptName","storePartID","part_id","sendExpt","which_col","dataToPOST","post","storeQKeys","keys","setNumQ","num","is","storeAnswer","question","que","ans","EnterID","props","ParticipantID","onChange","bind","showExpt","this","getData","username","match","params","studyExpt","studyName","split","e","setState","target","name","value","allKeys","Object","console","log","filter","str","charAt","length","history","push","className","onClick","Component","connect","HomePage","Slider","resetState","onSubmit","showSlider","childRef","undefined","min","lowRange","max","highRange","sliderCSVKey","submitted","style","color","StaticText","showItem","width","margin","textAlign","text","NormalCurve","sliderRef","React","createRef","rectRef","svgRef","areaRef","dotReturn","curveArea","triMouseDown","triDrag","triUp","questionNCKey","key1","graph1legend","key2","graph2legend","col11","col21","overlapVals","Math","abs","col22","xPos","yPos","xPosOrig","CX","distancing1","distancing","CY","ceilDist","stroke","fill","fillOpacity","strokeOpacity","cx","cy","r","circRad","distancing2","preventDefault","svgPre","current","ptPre","createSVGPoint","x","clientX","svgPPre","matrixTransform","getScreenCTM","inverse","prevState","triDown","mousePointerRange","triCent1","triCent2","svgPPree","screenX","y","screenY","svgX","pt","svg","svgP","round","len2","colLim2","col12","len1","colLim1","col2","innerHTML","onMouseMove","onMouseUp","questionNC","svgWidth","height","svgHeight","ref","opacity","Array","map","colValHeiS","row","colValHeiS2","dotReturn2","points","onMouseDown","class","backgroundColor","graph1","graph2","unitHeight","ceil","isDown","rectX","down","NormalCurveSurvey","lengthRef","startPos1Ref","startPos2Ref","tagRef1","tagRef2","svgColReturn","updateTag1","updateTag2","displayTag1","displayTag2","hideTag1","hideTag2","returnTri1","returnTri2","maxLength","onMouseEnter","onMouseLeave","color1","color2","fixCurve1","fixCurve2","dragger","distFromCent","variance","triCentCol1","variance1","triCentCol2","variance2","axisStart","colRelative","edgeLim","axisStartCol","axisEndCol","endCol","cols","svgColPlacement","clientY","elem","top","left","display","axisEnd","tickNum","tick","tickDist","textAnchor","lowVal","rangeVal","text-anchor","colNum","colNumInit","internalLength","edgeCol","edgeLength","axisWidth","startPos1","colNumVal","startPos2","axisLength","parseInt","showCoors","Histogram","graphRef","qRef","minRef","maxRef","drawChart","questionHistKey","sliderPos","histData","d3","append","attr","selectAll","enter","d","i","vertAlign","questionHist","position","histLowRange","histHighRange","step","checked","minVal","maxVal","Experiment","whichItem","onNextQuestion","onFinalSubmit","whichSubmit","alert","nextQ","toString","childSlider","nextQuestion","childNormalCurve","childStaticText","key","qKey","dataFileName","dataFileContent","fileName","histFileContent","childHistogram","participant","displayExpt","Success","finalObj","entry","condition","link","href","PreviewEnterID","PreviewSuccess","require","App","basename","exact","path","component","PreviewExpt","Boolean","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ccf55c30.chunk.js","sourcesContent":["import {\r\n  DB_INFO,\r\n  GET_EXPT,\r\n  PART_ID,\r\n  Q_KEYS,\r\n  NUM_Q,\r\n  FINAL_Q,\r\n  ANSWER,\r\n  ITEM_DATA\r\n} from \"../actions/types\";\r\nimport { act } from \"react-dom/test-utils\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nconst initialState = {\r\n  dbInfo: {},\r\n  exptToDisplay: {},\r\n  participantID: '',\r\n  questionKeys: [],\r\n  numQ: Number,\r\n  isFinalQ: false,\r\n  answer: [],\r\n  fileContent: {}\r\n};\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case DB_INFO:\r\n      return {\r\n        ...state,\r\n        dbInfo: action.payload\r\n      };\r\n    case GET_EXPT:\r\n      return {\r\n        ...state,\r\n        exptToDisplay: action.payload\r\n      };\r\n    case PART_ID:\r\n      return {\r\n        ...state,\r\n        participantID: action.payload\r\n      };\r\n    case Q_KEYS:\r\n      return {\r\n        ...state,\r\n        questionKeys: action.payload\r\n      };\r\n    case NUM_Q:\r\n      return {\r\n        ...state,\r\n        numQ: action.payload\r\n      }\r\n    case FINAL_Q:\r\n      return {\r\n        ...state,\r\n        isFinalQ: action.payload\r\n      };\r\n    case ANSWER:\r\n      return {\r\n        ...state,\r\n        answer: [...state.answer, action.payload]\r\n      };\r\n    case ITEM_DATA:\r\n      return {\r\n        ...state,\r\n        fileContent: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n","import { combineReducers } from \"redux\";\r\nimport dataReducer from \"./dataReducer\";\r\n\r\nexport default combineReducers({\r\n  expt: dataReducer\r\n});","export const DB_INFO = \"DB_INFO\";\r\nexport const GET_EXPT = \"GET_EXPT\";\r\nexport const PART_ID = \"PART_ID\";\r\nexport const SEND_EXPT = \"SEND_EXPT\";\r\nexport const Q_KEYS = \"Q_KEYS\";\r\nexport const NUM_Q = \"NUM_Q\";\r\nexport const FINAL_Q = \"FINAL_Q\";\r\nexport const ANSWER = \"ANSWER\";\r\nexport const ITEM_DATA = \"ITEM_DATA\";","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst initialState = {};\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  compose(\r\n    applyMiddleware(...middleware)\r\n    // ,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n  )\r\n);\r\n\r\nexport default store;","import axios from \"axios\";\r\nimport {\r\n  DB_INFO,\r\n  GET_EXPT,\r\n  PART_ID,\r\n  SEND_EXPT,\r\n  Q_KEYS,\r\n  NUM_Q,\r\n  FINAL_Q,\r\n  ANSWER,\r\n  ITEM_DATA\r\n} from \"./types\"\r\n\r\n// Input: name of a database, name of a collection \r\n// Output: a JSON object containing the input\r\n// Action: puts database - collection information into redux store so that \r\n//         it's easily accessible for all components\r\nexport const storeDBInfo = (which_database, which_collection) => dispatch => {\r\n  dispatch({\r\n    type: DB_INFO,\r\n    payload: {\r\n      db: which_database,\r\n      col: which_collection\r\n    }\r\n  })\r\n}\r\n\r\n// Input: name of a database, name of a study, name of an experiment\r\n// Output: a JSON object containing configuration data of the given experiment \r\n//         in the given study \r\n// Action: a GET request to get the output. \r\nexport const getExpt = (which_db, study_name, expt_name) => dispatch => {\r\n  const API_URL = 'https://test-api-615.herokuapp.com/api/feedback/' +\r\n    which_db + '/info/' + 'studyName-' + study_name;\r\n  axios\r\n    .get(API_URL)\r\n    .then(res => {\r\n      const experiments = res.data.experiments;\r\n      var thisExpt = {};\r\n      experiments.forEach(element => {\r\n        if (element.exptName == expt_name) {\r\n          thisExpt = element;\r\n        }\r\n      });\r\n      dispatch({\r\n        type: GET_EXPT,\r\n        payload: thisExpt\r\n      })\r\n    })\r\n}\r\n\r\n// Input: participant ID\r\n// Output: participant ID\r\n// Action: puts participant ID into redux store so that it's easily accessible \r\n//         for all components \r\nexport const storePartID = (part_id) => dispatch => {\r\n  dispatch({\r\n    type: PART_ID,\r\n    payload: part_id\r\n  })\r\n}\r\n\r\n// Input: name of a database, name of a collection, JSON object containing \r\n//        user responses\r\n// Output: NONE\r\n// Action: a POST request to send user response to the appropriate collection \r\n//         in Mongo database. \r\nexport const sendExpt = (which_db, which_col, dataToPOST) => dispatch => {\r\n  const API_URL = 'https://test-api-615.herokuapp.com/api/feedback/' +\r\n    which_db + \"/\" + which_col;\r\n  axios\r\n    .post(API_URL, dataToPOST)\r\n    .then(res => {\r\n      // console.log(res);\r\n    })\r\n}\r\n\r\n// Input: an array representing questions keys of an experiment\r\n// Output: the same array\r\n// Action: puts the array into redux store so that it's easily accessible for \r\n//         all components\r\nexport const storeQKeys = (keys) => dispatch => {\r\n  dispatch({\r\n    type: Q_KEYS,\r\n    payload: keys\r\n  })\r\n}\r\n\r\n// Input: a number representing the index of the questions keys array. \r\n//        This number tells Experiment.js what to display next\r\n// Output: the same number\r\n// Action: puts the number into redux store so that it's easily accessible \r\n//         for all components\r\nexport const setNumQ = (num) => dispatch => {\r\n  dispatch({\r\n    type: NUM_Q,\r\n    payload: num\r\n  })\r\n}\r\n\r\n// Input: a boolean indicating whether the next question to display is the \r\n//        last question. This boolean determines which type of <button> to show\r\n// Output: the same boolean\r\n// Action: puts the boolean into redux store so that it's easily accessible \r\n//         for all components\r\nexport const isFinalQ = (is) => dispatch => {\r\n  dispatch({\r\n    type: FINAL_Q,\r\n    payload: is\r\n  })\r\n}\r\n\r\n// Input: a string representing a question, any representing an answer\r\n// Output: a JSON object containing the inputs\r\n// Action: puts the object into redux store. Notice the redux reducer \r\n//         appends the answer to the existing state. In this way, ```Success.js``` can send all stored answers via API at the end of the experiment. \r\nexport const storeAnswer = (question, answer) => dispatch => {\r\n  dispatch({\r\n    type: ANSWER,\r\n    payload: {\r\n      que: question,\r\n      ans: answer\r\n    }\r\n  })\r\n}\r\n\r\n// ###DEPRECATED###\r\n// Reason: there's a lag in receiving the output, which causes errors when \r\n//         displaying experiment items. \r\n// Input: name of a database, name of an uploaded file whose content is a \r\n//        JSON object containing experiment item data\r\n// Output: the content of the file\r\n// Action: puts the output into redux store so that it's easily accessible \r\n//         for all components.\r\nexport const getItemData = (which_database, fileName) => dispatch => {\r\n  const API_URL = 'https://test-api-615.herokuapp.com/api/feedback/' +\r\n    which_database + \"/itemData\";\r\n  axios\r\n    .get(API_URL)\r\n    .then(res => {\r\n      const fileContent = res.data.filter(doc => doc.fileName == fileName)[0].fileContent\r\n      dispatch({\r\n        type: ITEM_DATA,\r\n        payload: fileContent\r\n      })\r\n    })\r\n}","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { \r\n  storeDBInfo,\r\n  storePartID, \r\n  getExpt,\r\n  storeQKeys,\r\n  setNumQ,\r\n  isFinalQ\r\n} \r\nfrom \"../actions/dataActions\";\r\n\r\nclass EnterID extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ParticipantID: ''\r\n    }\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.showExpt = this.showExpt.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n\r\n    const username = this.props.match.params.username;\r\n    const studyExpt = this.props.match.params.expt;\r\n    this.props.storeDBInfo(username, studyExpt);\r\n  }\r\n\r\n  getData() {\r\n    const username = this.props.match.params.username;\r\n    const studyName = this.props.match.params.expt.split(\"-\")[0];\r\n    const exptName = this.props.match.params.expt.split(\"-\")[1];\r\n    this.props.getExpt(username, studyName, exptName);\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n\r\n  showExpt() {\r\n    this.props.storePartID(this.state.ParticipantID);\r\n    const username = this.props.match.params.username;\r\n    const studyExpt = this.props.match.params.expt;\r\n    var questionKeys = [];\r\n    if (this.props.expt.exptToDisplay) {\r\n      const allKeys = Object.keys(this.props.expt.exptToDisplay);\r\n      console.log(allKeys);\r\n      // in the JSON file each question must have index q0, q1, q2, ... \r\n      questionKeys = allKeys.filter(str => str.charAt(0) == \"q\");\r\n      this.props.storeQKeys(questionKeys);\r\n    }\r\n    // console.log(questionKeys);\r\n    if (questionKeys.length == 1) {\r\n      this.props.isFinalQ(true);\r\n    }\r\n    this.props.setNumQ(0);\r\n    this.props.history.push(\"/expt/\" + username + \"/\" + studyExpt + \r\n      \"/\" + questionKeys[0]);\r\n  }\r\n\r\n  render() {\r\n    const exptName = this.props.match.params.expt;\r\n      return (\r\n        <div className=\"container\">\r\n        Experiment name: <br/>\r\n        <b>{exptName}</b>\r\n        <br/><br/>\r\n        Enter your unique ID: <p></p>\r\n        <input type=\"text\" name=\"ParticipantID\" \r\n          value={this.state.ParticipantID} onChange={this.onChange}/>\r\n        <br/>\r\n        <input type=\"button\" className=\"btn\" value=\"Start Experiment\" \r\n          onClick={this.showExpt}/>\r\n        <br/><br/>\r\n        Note: once you click \"Ok\" for a question, you won't be\r\n        able to change your response. \r\n      </div>\r\n      )\r\n  }\r\n}\r\n\r\nEnterID.propTypes = {\r\n  storeDBInfo: PropTypes.func.isRequired,\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storePartID: PropTypes.func.isRequired,\r\n  participantID: PropTypes.string.isRequired,\r\n  storeQKeys: PropTypes.func.isRequired,\r\n  setNumQ: PropTypes.func.isRequired,\r\n  isFinalQ: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n  participantID: state.participantID\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { storeDBInfo, storePartID, getExpt, storeQKeys, setNumQ, isFinalQ }\r\n)(EnterID);\r\n","import React, { Component } from 'react';\r\n\r\nclass HomePage extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <h1>This is the home page</h1>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HomePage;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  getExpt,\r\n  storeAnswer\r\n} from \"../actions/dataActions\";\r\n\r\n// This component does the following:\r\n// - Display question\r\n// - Display an experiment item (in this case, a slider)\r\n// - Store answer into Redux store upon submission \r\nclass Slider extends Component {\r\n  constructor() {\r\n    // putting super() here so that we can use this.blahblah\r\n    super();\r\n    this.state = this.initialState;\r\n\r\n    this.resetState = this.resetState.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n    this.showSlider = this.showSlider.bind(this);\r\n  }\r\n\r\n  get initialState() {\r\n    return {\r\n      submitted: false,\r\n      value: 0\r\n    };\r\n  }\r\n\r\n  resetState() {\r\n    this.setState(this.initialState);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { childRef } = this.props;\r\n    childRef(this);\r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { childRef } = this.props;\r\n    childRef(undefined);\r\n  }\r\n\r\n  getData() {\r\n    const db = this.props.expt.dbInfo.db;\r\n    // there will be problems if user's study name / experiment name inclues \"-\"\r\n    const studyName = this.props.expt.dbInfo.col.split(\"-\")[0];\r\n    const exptName = this.props.expt.dbInfo.col.split(\"-\")[1];\r\n    this.props.getExpt(db, studyName, exptName);\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n\r\n  showSlider() {\r\n    return (\r\n      <div className=\"container\">\r\n        {this.props.question} <br/>\r\n        <input \r\n          type=\"range\"\r\n          min={this.props.lowRange}\r\n          max={this.props.highRange}\r\n          name=\"value\"\r\n          value={this.state.value}\r\n          onChange={this.onChange}\r\n        />\r\n        {this.state.value} <br/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  onSubmit() {\r\n    const question = this.props.question;\r\n    const sliderCSVKey = this.props.sliderCSVKey;\r\n    // put answer in our redux store to be sent via API later\r\n    this.props.storeAnswer(sliderCSVKey, this.state.value);\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.showSlider()} <br/>\r\n        {\r\n          !this.state.submitted && \r\n          <div>\r\n            <input type=\"submit\" className=\"btn\" value=\"Ok\"\r\n              onClick={this.onSubmit}/> <br/>\r\n            <p style={{ color: \"grey\" }}>\r\n              Reminder: Once you click \"Ok\", your response to this question will be \r\n              recorded, and you won't be able to change your answer. \r\n            </p>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSlider.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storeAnswer: PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, storeAnswer }\r\n)(Slider);","import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  getExpt\r\n} from \"../actions/dataActions\";\r\n\r\nclass StaticText extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = this.initialState;\r\n    \r\n    // ###TODO###: change the name of the following binding if you see fit\r\n    // this binds the state to the showItem function below\r\n    this.showItem = this.showItem.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  get initialState() {\r\n    return {\r\n      submitted: false\r\n    };\r\n  }\r\n\r\n  // additional setup to communicate with Experiment.js\r\n  componentDidMount() {\r\n    const { childRef } = this.props;\r\n    childRef(this);\r\n    this.getData();\r\n  }\r\n\r\n  // additional setup to communicate with Experiment.js\r\n  componentWillUnmount() {\r\n    const { childRef } = this.props;\r\n    childRef(undefined);\r\n  }\r\n\r\n  // get experiment data from the database \r\n  getData() {\r\n    const db = this.props.expt.dbInfo.db;\r\n    const studyName = this.props.expt.dbInfo.col.split(\"-\")[0];\r\n    const exptName = this.props.expt.dbInfo.col.split(\"-\")[1];\r\n    this.props.getExpt(db, studyName, exptName);\r\n  }\r\n\r\n  // ###TODO###: add your own function(s) to show experiment item(s)\r\n  showItem() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div style={{ width: \"60%\", margin: \"auto\" }}>\r\n          <p style={{ textAlign: \"left\" }}>\r\n            {this.props.text}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  onSubmit() {\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  // please render anything else you see fit\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        {this.showItem()} <br/><br/>\r\n        {\r\n          !this.state.submitted && \r\n          <div>\r\n            <input type=\"submit\" className=\"btn\" value=\"Ok\"\r\n              onClick={this.onSubmit}/> <br/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n// Listing required functions / data\r\nStaticText.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired\r\n}\r\n\r\n// mapping Redux state to props that we can use in our component\r\n// expt contains all info from a given experiment \r\nconst mapStateToProps = state => ({\r\n  expt: state.expt\r\n})\r\n\r\n// connecting props to our component\r\n// export our component so that Experiment.js can use it \r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt }\r\n)(StaticText);","import React, { Component } from 'react';\r\nimport './NormalCurve.css';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  getExpt,\r\n  storeAnswer\r\n} from \"../actions/dataActions\";\r\n\r\nclass NormalCurve extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.sliderRef = React.createRef();\r\n    this.rectRef = React.createRef();\r\n    this.svgRef = React.createRef();\r\n    this.areaRef = React.createRef();\r\n\r\n    this.dotReturn = this.dotReturn.bind(this);\r\n    this.curveArea = this.curveArea.bind(this);\r\n    this.triMouseDown = this.triMouseDown.bind(this);\r\n    this.triDrag = this.triDrag.bind(this);\r\n    this.triUp = this.triUp.bind(this);\r\n    this.curveArea = this.curveArea.bind(this);\r\n\r\n    this.resetState = this.resetState.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    this.state = this.initialState;\r\n  }\r\n\r\n  get initialState() {\r\n    const unitHeight = this.props.data[\"max-height\"];\r\n    const circRad = this.props.data[\"circle-radius\"];\r\n    const distancing = circRad * 4 - 1;\r\n    const height = (Math.ceil((distancing * unitHeight) / 50) + 1) * 50;\r\n    const ceilDist = height - 50;\r\n    const length = Math.ceil((distancing * this.props.data[\"len1\"] * 2 + \r\n      distancing * this.props.data[\"len2\"] * 2) / 100) * 100;\r\n    const colNum = Math.round(length / distancing);\r\n    // console.log(height, distancing, ceilDist, colNum);\r\n    return {\r\n      submitted: false,      \r\n      x: 0, y: 0, isDown: false,\r\n      rectX: 12.5,\r\n      down: false,\r\n      svgWidth: length,\r\n      svgHeight: height,\r\n      svgX: 6,\r\n      len1: this.props.data[\"len1\"],\r\n      colValHeiS: this.props.data[\"colValHeiS\"],\r\n      len2: this.props.data[\"len2\"],\r\n      colValHeiS2: this.props.data[\"colValHeiS2\"],\r\n      distancing: distancing,\r\n      distancing1: (this.props.data[\"len2\"] + 1) * distancing,\r\n      distancing2: \r\n        (this.props.data[\"len1\"] + this.props.data[\"len2\"] + 4) * distancing,\r\n      triCent1: \r\n        Math.round((0.5 * this.props.data[\"len1\"]) * distancing) + distancing,\r\n      triCent2: \r\n        Math.round((0.5 * this.props.data[\"len2\"]) * distancing) + distancing,\r\n      mousePointerRange: 0,\r\n      triDown: false,\r\n      col11: this.props.data[\"len2\"] + 1,\r\n      col12: this.props.data[\"len1\"] + this.props.data[\"len2\"] + 1,\r\n      col21: this.props.data[\"len1\"] + this.props.data[\"len2\"] + 3,\r\n      col22: this.props.data[\"len1\"] + 2 * this.props.data[\"len2\"] + 3,\r\n      colLim1: Math.round((length - (this.props.data[\"len1\"] * distancing)) / \r\n        distancing),\r\n      colLim2: Math.round((length - (this.props.data[\"len2\"] * distancing)) / \r\n        distancing),\r\n      overlapVals: this.props.data[\"overlapVals\"],\r\n      circRad: circRad,\r\n      ceilDist: ceilDist\r\n    }\r\n  }\r\n\r\n  resetState() {\r\n    this.setState(this.initialState);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { childRef } = this.props;\r\n    childRef(this);\r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { childRef } = this.props;\r\n    childRef(undefined);\r\n  }\r\n\r\n  getData() {\r\n    const db = this.props.expt.dbInfo.db;\r\n    const studyName = this.props.expt.dbInfo.col.split(\"-\")[0];\r\n    const exptName = this.props.expt.dbInfo.col.split(\"-\")[1];\r\n    this.props.getExpt(db, studyName, exptName);\r\n  }\r\n\r\n  // add user x positions in here\r\n  onSubmit() {\r\n    const question = this.props.questionNCKey;\r\n    const key1 = this.props.graph1legend;\r\n    const key2 = this.props.graph2legend;\r\n    const answer = {\r\n      [key1]: this.state.col11,\r\n      [key2]: this.state.col21,\r\n      area: this.state.overlapVals[\r\n        Math.abs(this.state.col22 - this.state.col11)\r\n      ]\r\n    }\r\n    this.props.storeAnswer(question, answer);\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  dotReturn(xPos, yPos) {\r\n    const xPosOrig = xPos;\r\n    if (xPos > 7) {\r\n      xPos = 15 - xPos;\r\n    }\r\n    const CX = this.state.distancing1 + this.state.distancing * xPosOrig + 10;\r\n    const CY = this.state.ceilDist - this.state.distancing * yPos + 10;\r\n    var hard = <circle \r\n      className=\"icon\" stroke=\"DarkCyan\" fill=\"DarkCyan\" fillOpacity=\"0.3\" \r\n      strokeOpacity=\"0.3\" cx={CX} cy={CY} r={this.state.circRad}></circle>;\r\n    return hard;\r\n  }\r\n\r\n  dotReturn2(xPos, yPos) {\r\n    const xPosOrig = xPos;\r\n    if (xPos > 7) {\r\n      xPos = 15 - xPos;\r\n    }\r\n    const CX = this.state.distancing2 + this.state.distancing * xPosOrig + 10;\r\n    const CY = this.state.ceilDist - this.state.distancing * yPos + 10;\r\n    var hard = <circle \r\n      className=\"icon\" stroke=\"Crimson\" fill=\"Crimson\" fillOpacity=\"0.3\" \r\n      strokeOpacity=\"0.3\" cx={CX} cy={CY} r={this.state.circRad}></circle>;\r\n    return hard;\r\n  }\r\n\r\n  triMouseDown(e, num) {\r\n    if (e.type === \"mousedown\") {\r\n      // console.log(\"MOUSEDOWN\");\r\n      e.preventDefault();\r\n      var svgPre = this.svgRef.current;\r\n      // Set mousePointerRange so that we know the distance from the mouse \r\n      // tip to the x-value of the triangle tip\r\n      var ptPre = svgPre.createSVGPoint();\r\n      ptPre.x = e.clientX;\r\n      var svgPPre = ptPre.matrixTransform(svgPre.getScreenCTM().inverse());\r\n      if (num === 1) {\r\n        this.setState(prevState => ({\r\n          // rectX : svgP.x,\r\n          triDown: num,\r\n          mousePointerRange: prevState.triCent1 + this.state.distancing1 - \r\n            svgPPre.x\r\n        }));\r\n      }\r\n      else if (num === 2) {\r\n        this.setState(prevState => ({\r\n          // rectX : svgP.x,\r\n          triDown: num,\r\n          mousePointerRange: prevState.triCent2 + this.state.distancing2 - \r\n            svgPPre.x\r\n        }));\r\n      }\r\n      // console.log(this.state);\r\n    }\r\n  }\r\n\r\n  triDrag(e) {\r\n    // Set mousePointerRange so that we know the distance from the mouse \r\n    // tip to the x-value of the triangle tip\r\n    var svgPre = this.svgRef.current;\r\n    var ptPre = svgPre.createSVGPoint();\r\n    ptPre.x = e.clientX;\r\n    var svgPPree = ptPre.matrixTransform(svgPre.getScreenCTM().inverse());\r\n    this.setState({ x: e.screenX, y: e.screenY, svgX: svgPPree.x });\r\n    if (this.state.triDown === 2) {\r\n      // console.log(\"DRAG CONT'D\");\r\n      var svg = this.svgRef.current;\r\n      var pt = svg.createSVGPoint();\r\n      pt.x = e.clientX;\r\n      var svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\r\n      e.preventDefault();\r\n      var x = svgP.x - this.state.triCent2 + this.state.mousePointerRange;\r\n      var col = Math.round((x - 6) / this.state.distancing);\r\n      if (col < 0) {\r\n        this.setState({ distancing2: 0, col21: 0, col22: this.state.len2 - 1 });\r\n      }\r\n      else if (col > this.state.colLim2) {\r\n        this.setState({ distancing2: this.state.distancing * this.state.colLim2, \r\n          col21: this.state.colLim2, col22: this.state.colLim2 + \r\n          this.state.len2 - 1 })\r\n      }\r\n      else {\r\n        this.setState({ distancing2: this.state.distancing * col, col21: col, \r\n          col22: col + this.state.len2 - 1 });\r\n      }\r\n      this.curveArea(col);\r\n      // this.setState({ distancing2 : x })\r\n    }\r\n    else if (this.state.triDown === 1) {\r\n      // console.log(\"DRAG CONT'D\");\r\n      var svg = this.svgRef.current;\r\n      var pt = svg.createSVGPoint();\r\n      pt.x = e.clientX;\r\n      var svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\r\n      e.preventDefault();\r\n      var x = svgP.x - this.state.triCent1 + this.state.mousePointerRange;\r\n      var col = Math.round((x - 6) / this.state.distancing);\r\n      if (col < 0) {\r\n        this.setState({ distancing1: 0, col11: 0, col12: this.state.len1 - 1 });\r\n      }\r\n      else if (col > this.state.colLim1) {\r\n        this.setState({ distancing1: this.state.distancing * this.state.colLim1, \r\n          col11: this.state.colLim1, col2: this.state.colLim1 + \r\n          this.state.len1 - 1 })\r\n      }\r\n      else {\r\n        this.setState({ distancing1: this.state.distancing * col, col11: col, \r\n          col12: col + this.state.len1 - 1 });\r\n      }\r\n      this.curveArea(col);\r\n      // this.setState({ distancing2 : x })\r\n    }\r\n  }\r\n\r\n  triUp(e) {\r\n    // console.log(\"UP\");\r\n    if (this.state.triDown) {\r\n      this.setState({ triDown: false });\r\n    }\r\n  }\r\n\r\n  curveArea(col) {\r\n    if (this.state.col11 > this.state.col22 || \r\n        this.state.col12 < this.state.col21) {\r\n      this.areaRef.current.innerHTML = 0;\r\n    }\r\n    else {\r\n      this.areaRef.current.innerHTML = \r\n        this.state.overlapVals[Math.abs(this.state.col22 - this.state.col11)];\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div onMouseMove={e => this.triDrag(e)} onMouseUp={e => this.triUp(e)}>\r\n        {/* clean up question */}\r\n        <div className=\"container\">\r\n          <h3>Question: {this.props.questionNC}</h3>\r\n        </div> \r\n        <svg width={this.state.svgWidth} height={this.state.svgHeight} \r\n          ref={this.svgRef}>\r\n          <rect opacity=\"0.2\" width=\"100%\" height=\"100%\" />\r\n          {[...Array(this.state.len1).keys()].map(\r\n            (col) =>\r\n              [...Array(this.state.colValHeiS[col]).keys()].map(\r\n                (row) => this.dotReturn(col, row)\r\n              )\r\n          )}\r\n          {[...Array(this.state.len2).keys()].map(\r\n            (col) =>\r\n              [...Array(this.state.colValHeiS2[col]).keys()].map(\r\n                (row) => this.dotReturn2(col, row)\r\n              )\r\n          )}\r\n          <polygon\r\n            points={\r\n              [\r\n                [this.state.triCent1 + this.state.distancing1 - 5, \r\n                  this.state.ceilDist + 35],\r\n                [this.state.triCent1 + this.state.distancing1 + 5, \r\n                  this.state.ceilDist + 35],\r\n                [this.state.triCent1 + this.state.distancing1, \r\n                  this.state.ceilDist + 20]\r\n              ]\r\n            }\r\n            onMouseDown={(e, num) => this.triMouseDown(e, 1)}\r\n          />\r\n          <polygon\r\n            points={\r\n              [\r\n                [this.state.triCent2 + this.state.distancing2 - 5, \r\n                  this.state.ceilDist + 35],\r\n                [this.state.triCent2 + this.state.distancing2 + 5, \r\n                  this.state.ceilDist + 35],\r\n                [this.state.triCent2 + this.state.distancing2, \r\n                  this.state.ceilDist + 20]\r\n              ]\r\n            }\r\n            onMouseDown={(e, num) => this.triMouseDown(e, 2)}\r\n          />\r\n          Sorry, please use a different browser.\r\n        </svg>\r\n        <br />\r\n        <div class=\"boxed\">\r\n          <div class=\"color-box\" style={{ backgroundColor: \"DarkCyan\" }}></div>\r\n          {this.props.graph1}\r\n          <br />\r\n          <div class=\"color-box\" style={{ backgroundColor: \"Crimson\" }}></div>\r\n          {this.props.graph2}\r\n        </div>\r\n        <br />\r\n        <h4>Area Under Curve: <span ref={this.areaRef}></span> | \r\n          First x-coordinate: {this.state.col11} | \r\n          Second x-coordinate: {this.state.col21} </h4>\r\n        {\r\n          !this.state.submitted && \r\n          <div>\r\n            <input type=\"submit\" className=\"btn\" value=\"Ok\"\r\n              onClick={this.onSubmit}/> <br/>\r\n            <p style={{ color: \"grey\" }}>\r\n              Reminder: Once you click \"Ok\", your response to this question \r\n              will be recorded, and you won't be able to change your answer. \r\n            </p>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nNormalCurve.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storeAnswer: PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, storeAnswer }\r\n)(NormalCurve);","import React, { Component } from 'react';\r\nimport './NormalCurve.css';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  getExpt,\r\n  storeAnswer\r\n} from \"../actions/dataActions\";\r\nimport { forceCenter } from 'd3';\r\n\r\nclass NormalCurveSurvey extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.sliderRef = React.createRef();\r\n    this.rectRef = React.createRef();\r\n    this.svgRef = React.createRef();\r\n    this.areaRef = React.createRef();\r\n    this.lengthRef = React.createRef();\r\n    this.startPos1Ref = React.createRef();\r\n    this.startPos2Ref = React.createRef();\r\n    this.tagRef1 = React.createRef();\r\n    this.tagRef2 = React.createRef();\r\n\r\n    this.dotReturn = this.dotReturn.bind(this);\r\n    this.curveArea = this.curveArea.bind(this);\r\n    this.triMouseDown = this.triMouseDown.bind(this);\r\n    this.triDrag = this.triDrag.bind(this);\r\n    this.triUp = this.triUp.bind(this);\r\n    this.curveArea = this.curveArea.bind(this);\r\n    this.svgColReturn = this.svgColReturn.bind(this);\r\n    this.svgColReturn = this.svgColReturn.bind(this);\r\n    this.updateTag1 = this.updateTag1.bind(this);\r\n    this.updateTag2 = this.updateTag2.bind(this);\r\n    this.displayTag1 = this.displayTag1.bind(this);\r\n    this.displayTag2 = this.displayTag2.bind(this);\r\n    this.hideTag1 = this.hideTag1.bind(this);\r\n    this.hideTag2 = this.hideTag2.bind(this);\r\n    this.returnTri1 = this.returnTri1.bind(this);\r\n    this.returnTri2 = this.returnTri2.bind(this);\r\n\r\n    this.resetState = this.resetState.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    this.state = this.initialState;\r\n  }\r\n\r\n  get initialState() {\r\n    const data = this.props.data;\r\n    // console.log(data);\r\n    const unitHeight = data[\"max-height\"];\r\n    const circRad = data[\"circle-radius\"];\r\n    const len1 = data[\"len1\"];\r\n    const len2 = data[\"len2\"];\r\n    const distancing = circRad * 4 - 1;\r\n    const height = (Math.ceil((distancing * unitHeight) / 50) + 1) * 50;\r\n\r\n    const colNumInit = data[\"axis-length\"];\r\n    const internalLength = colNumInit * distancing;\r\n    const edgeCol = Math.ceil(Math.max(len1, len2) / 2);\r\n    const edgeLength = Math.max(len1, len2) * distancing;\r\n\r\n    const ceilDist = height - 50;\r\n    const length = edgeLength + internalLength;\r\n    const colNum = Math.ceil(length / distancing);\r\n\r\n    const axisStart = Math.ceil(edgeLength / 2);\r\n    const axisStartCol = edgeCol;\r\n    // console.log(\"startCol\", axisStartCol);\r\n    const axisWidth = length - ((len1 / 2 + 1) * distancing + (len2 / 2 + 1) * distancing - 1);\r\n    const axisEndCol = internalLength / distancing;\r\n    const axisEnd = axisEndCol * distancing;\r\n\r\n    const triCent1 = Math.ceil(0.5 * len1) * distancing;\r\n    const triCent2 = Math.ceil(0.5 * len2) * distancing;\r\n    const triCentCol1 = Math.ceil(triCent1 / distancing);\r\n    const triCentCol2 = Math.ceil(triCent2 / distancing);\r\n    // console.log(\"triCentCol1: \", triCentCol1);\r\n    // console.log(\"triCentCol2: \", triCentCol2);\r\n\r\n    const variance1 = Math.abs(Math.ceil(len1 / 2) - axisStartCol);\r\n    const variance2 = Math.abs(Math.ceil(len2 / 2) - axisStartCol);\r\n\r\n    let edgeLim;\r\n    if (\"edgeLim\" in data) {\r\n      edgeLim = data[\"edgeLim\"];\r\n    }\r\n    else {\r\n      edgeLim = true;\r\n    }\r\n\r\n    const startPos1 = data[\"startPos1\"];\r\n    let distancing1 = startPos1 + variance1 - 1;\r\n    let col11 = startPos1 + variance1;\r\n    let col12 = startPos1 + len1 - 1;\r\n    let col11Rel = startPos1;\r\n\r\n    let variance = axisStartCol - variance1;\r\n    if (edgeLim) {\r\n      if (col11 < axisStartCol - 1) {\r\n        distancing1 = (axisStartCol - 1) * distancing;\r\n        col11 = 0;\r\n        col12 = len1 - 1;\r\n      }\r\n      else if (col11 + len1 + 1 > axisStartCol + axisEndCol) {\r\n        const endCol = axisEndCol - len1;\r\n        distancing1 = distancing * (axisStartCol + endCol - 1);\r\n        col11 = endCol;\r\n        col12 = endCol + len2 - 1;\r\n      }\r\n      else {\r\n        distancing1 = distancing * col11;\r\n        col11 = col11Rel - variance;\r\n        col12 = col11Rel - variance + len1 - 1;\r\n      }\r\n    }\r\n    else {\r\n      // col11 = col11 - 1;\r\n      if (col11 + triCentCol1 < axisStartCol) {\r\n        distancing1 = (variance1) * distancing;\r\n        col11 = 0;\r\n        col12 = len1 - 1;\r\n      }\r\n      else if (col11 + triCentCol1 > axisStartCol + axisEndCol) {\r\n        distancing1 = distancing * (variance1 + axisEndCol);\r\n        col11 = axisEndCol;\r\n        col12 = axisEndCol + len1 - 1;\r\n      }\r\n      else {\r\n        distancing1 = distancing * (col11);\r\n        col11 = col11Rel;\r\n        col12 = col11Rel + len1 - 1;\r\n      }\r\n    }\r\n\r\n    const startPos2 = data[\"startPos2\"];\r\n    let distancing2 = startPos2 + variance2 - 1;\r\n    let col21 = startPos2 + variance2;\r\n    let col22 = startPos2 + len2 - 1;\r\n    let col21Rel = startPos2;\r\n\r\n    variance = axisStartCol - variance2;\r\n    if (edgeLim) {\r\n      if (col21 < axisStartCol - 1) {\r\n        distancing2 = (axisStartCol - 1) * distancing;\r\n        col21 = 0;\r\n        col22 = len2 - 1;\r\n      }\r\n      else if (col21 + len2 + 1 > axisStartCol + axisEndCol) {\r\n        const endCol = axisEndCol - len2;\r\n        distancing2 = distancing * (axisStartCol + endCol);\r\n        col21 = endCol;\r\n        col22 = endCol + len2 - 1;\r\n      }\r\n      else {\r\n        distancing2 = distancing * col21;\r\n        col21 = col21Rel - variance;\r\n        col22 = col21Rel - variance + len2 - 1;\r\n      }\r\n    }\r\n    else {\r\n      // col21 = col21 - 1;\r\n      if (col21 + triCentCol2 < axisStartCol) {\r\n        distancing2 = (variance2) * distancing;\r\n        col21 = 0;\r\n        col22 = len2 - 1;\r\n      }\r\n      else if (col21 + triCentCol2 > axisStartCol + axisEndCol) {\r\n        distancing2 = distancing * (variance2 + axisEndCol - 1);\r\n        col21 = axisEndCol;\r\n        col22 = axisEndCol + len2 - 1;\r\n      }\r\n      else {\r\n        distancing2 = distancing * (col21);\r\n        col21 = col21Rel;\r\n        col22 = col21Rel + len2 - 1;\r\n      }\r\n    }\r\n\r\n    let colNumVal;\r\n    if (\"colNumVal\" in data) {\r\n      colNumVal = this.props.data[\"colNumVal\"];\r\n    }\r\n    else {\r\n      colNumVal = 1;\r\n    }\r\n\r\n    let tickNum;\r\n    let tickDist;\r\n    let rangeVal;\r\n    const axisLength = colNumInit * colNumVal;\r\n    // console.log(\"tickNum\", data[\"tickNum\"], axisLength % (parseInt(data[\"tickNum\"]) + 1) === 0);\r\n    if (\"tickNum\" in data && axisLength % (parseInt(data[\"tickNum\"]) + 1) === 0) {\r\n      tickNum = parseInt(data[\"tickNum\"]);\r\n      tickDist = colNumInit * distancing / (tickNum + 1);\r\n      rangeVal = axisLength / (tickNum + 1);\r\n    }\r\n    else {\r\n      tickNum = 0;\r\n      tickDist = axisLength;\r\n      rangeVal = axisLength;\r\n    }\r\n\r\n    let fixCurve1;\r\n    if (\"fixCurve1\" in data) {\r\n      fixCurve1 = data[\"fixCurve1\"];\r\n    }\r\n    else {\r\n      fixCurve1 = false;\r\n    }\r\n\r\n    let fixCurve2;\r\n    if (\"fixCurve2\" in data) {\r\n      fixCurve2 = data[\"fixCurve2\"];\r\n    }\r\n    else {\r\n      fixCurve2 = false;\r\n    }\r\n\r\n    let maxLength = len1;\r\n    if (len2 > len1) {\r\n      maxLength = len2;\r\n    }\r\n\r\n    let color1;\r\n    if (\"color1\" in data) {\r\n      color1 = data[\"color1\"];\r\n    }\r\n    else {\r\n      color1 = \"CornflowerBlue\";\r\n    }\r\n\r\n    let color2;\r\n    if (\"color2\" in data) {\r\n      color2 = data[\"color2\"];\r\n    }\r\n    else {\r\n      color2 = \"Crimson\";\r\n    }\r\n\r\n    return {\r\n      axisLength: data[\"axis-length\"],\r\n      startPos1: data[\"startPos1\"],\r\n      startPos2: data[\"startPos2\"],\r\n      x: 0, y: 0, isDown: false,\r\n      rectX: 12.5,\r\n      down: false,\r\n      svgWidth: length,\r\n      svgHeight: height,\r\n      svgX: 6,\r\n      len1: len1,\r\n      colValHeiS: data[\"colValHeiS\"],\r\n      len2: len2,\r\n      colValHeiS2: data[\"colValHeiS2\"],\r\n      distancing: distancing,\r\n      distancing1 : distancing1,\r\n      distancing2: distancing2,\r\n      triCent1: triCentCol1 * distancing,\r\n      triCentCol1: triCentCol1,\r\n      triCent2: triCentCol2 * distancing,\r\n      triCentCol2: triCentCol2,\r\n      mousePointerRange: 0,\r\n      triDown: false,\r\n      col11: col11,\r\n      col12: col12,\r\n      col21: col21,\r\n      col22: col22,\r\n      colLim1: Math.round((length - (len1 * distancing)) / distancing),\r\n      colLim2: Math.round((length - (len2 * distancing)) / distancing),\r\n      overlapVals: data[\"overlapVals\"],\r\n      circRad: circRad,\r\n      ceilDist: ceilDist,\r\n      axisStart: axisStart,\r\n      axisStartCol: axisStartCol,\r\n      axisWidth: axisWidth,\r\n      axisEnd: axisEnd,\r\n      axisEndCol: axisEndCol,\r\n      edgeCol: edgeCol,\r\n      edgeLength: edgeLength,\r\n      colNum: colNumInit,\r\n      variance1: variance1,\r\n      variance2: variance2,\r\n      lowVal: this.props.data[\"lowVal\"],\r\n      showCoors: true,\r\n      colNumVal: colNumVal,\r\n      tickNum: tickNum,\r\n      tickDist: tickDist,\r\n      rangeVal: rangeVal,\r\n      edgeLim: edgeLim,\r\n      fixCurve1: fixCurve1,\r\n      fixCurve2: fixCurve2,\r\n      maxLength: maxLength,\r\n      color1: color1,\r\n      color2: color2\r\n    };\r\n  }\r\n\r\n  resetState() {\r\n    this.setState(this.initialState);\r\n  }\r\n\r\n  // componentDidMount() {\r\n  //   const { childRef } = this.props;\r\n  //   childRef(this);\r\n  //   this.getData();\r\n  // }\r\n\r\n  // componentWillUnmount() {\r\n  //   const { childRef } = this.props;\r\n  //   childRef(undefined);\r\n  // }\r\n\r\n  getData() {\r\n    const db = this.props.expt.dbInfo.db;\r\n    const studyName = this.props.expt.dbInfo.col.split(\"-\")[0];\r\n    const exptName = this.props.expt.dbInfo.col.split(\"-\")[1];\r\n    this.props.getExpt(db, studyName, exptName);\r\n  }\r\n\r\n  onSubmit() {\r\n    const question = this.props.questionNCKey;\r\n    const key1 = this.props.graph1legend;\r\n    const key2 = this.props.graph2legend;\r\n    const answer = {\r\n      [key1]: this.state.col11,\r\n      [key2]: this.state.col21,\r\n      area: this.areaRef.current.innerHTML\r\n    }\r\n    this.props.storeAnswer(question, answer);\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  dotReturn(xPos, yPos) {\r\n    const xPosOrig = xPos;\r\n\r\n    const CX = this.state.distancing1 + this.state.distancing * (xPosOrig + 1) + this.state.circRad - this.state.maxLength + 10;\r\n    const CY = this.state.ceilDist - this.state.distancing * yPos + 10;\r\n\r\n    var hard = \r\n    <circle \r\n    onMouseEnter={e => this.displayTag1(e)}\r\n    onMouseLeave={e => this.hideTag1(e)}\r\n    onMouseMove={e => this.updateTag1(e)} \r\n    className=\"icon circle1\" \r\n    stroke={this.state.color1}\r\n    fill={this.state.color1}\r\n    fillOpacity=\"0.3\" \r\n    strokeOpacity=\"0.3\" cx={CX} cy={CY} r={this.state.circRad}>\r\n    </circle>;\r\n\r\n    return hard;\r\n  }\r\n\r\n  dotReturn2(xPos, yPos) {\r\n    const xPosOrig = xPos;\r\n\r\n    const CX = this.state.distancing2 + this.state.distancing * (xPosOrig + 1) + this.state.circRad - this.state.maxLength + 10;\r\n    const CY = this.state.ceilDist - this.state.distancing * yPos + 10;\r\n\r\n    var hard = \r\n    <circle \r\n    onMouseEnter={e => this.displayTag2(e)}\r\n    onMouseLeave={e => this.hideTag2(e)}\r\n    onMouseMove={e => this.updateTag2(e)} \r\n    className=\"icon circle2\" \r\n    stroke={this.state.color2}\r\n    fill={this.state.color2}\r\n    fillOpacity=\"0.3\" \r\n    strokeOpacity=\"0.3\" cx={CX} cy={CY} r={this.state.circRad}>\r\n\r\n    </circle>;\r\n\r\n    return hard;\r\n  }\r\n\r\n  returnTri1() {\r\n    if (this.state.fixCurve1) {\r\n      return (null);\r\n    }\r\n    else {\r\n      return (\r\n        <polygon\r\n            points={\r\n              [\r\n                [this.state.triCent1 + this.state.distancing1 - 15, this.state.ceilDist + 35],\r\n                [this.state.triCent1 + this.state.distancing1 + 15, this.state.ceilDist + 35],\r\n                [this.state.triCent1 + this.state.distancing1, this.state.ceilDist + 20]\r\n              ]\r\n            }\r\n            onMouseDown={(e, num) => this.triMouseDown(e, 1)}\r\n          />\r\n      )\r\n    }\r\n  }\r\n\r\n  returnTri2() {\r\n    if (this.state.fixCurve2) {\r\n      return (null);\r\n    }\r\n    else {\r\n      return (\r\n        <polygon\r\n            points={\r\n              [\r\n                [this.state.triCent2 + this.state.distancing2 - 15, this.state.ceilDist + 35],\r\n                [this.state.triCent2 + this.state.distancing2 + 15, this.state.ceilDist + 35],\r\n                [this.state.triCent2 + this.state.distancing2, this.state.ceilDist + 20]\r\n              ]\r\n            }\r\n            onMouseDown={(e, num) => this.triMouseDown(e, 2)}\r\n          />\r\n      )\r\n    }\r\n  }\r\n\r\n  svgColReturn(e, dragger) {\r\n    let distFromCent;\r\n    let variance;\r\n    if (dragger === 1) {\r\n      distFromCent = this.state.triCentCol1;\r\n      variance = this.state.variance1;\r\n    }\r\n    else if (dragger === 2) {\r\n      distFromCent = this.state.triCentCol2;\r\n      variance = this.state.variance2;\r\n    }\r\n    var svg = this.svgRef.current;\r\n    var pt = svg.createSVGPoint();\r\n    pt.x = e.clientX;\r\n    var svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\r\n    e.preventDefault();\r\n    var x = svgP.x - distFromCent + this.state.mousePointerRange;\r\n    var col = Math.round((x - this.state.axisStart) / this.state.distancing) + variance;\r\n    var colRelative = Math.round((x - this.state.axisStart) / this.state.distancing) - 1;\r\n    return [col, colRelative];\r\n  }\r\n\r\n  svgColPlacement(col, colRelative, dragger) {\r\n    // console.log(col, colRelative);\r\n    // console.log(this.state.axisStartCol);\r\n    // console.log(this.state.axisStart);\r\n    if (this.state.edgeLim) {\r\n      if (dragger === 2) {\r\n        const variance = this.state.axisStartCol - this.state.variance2;\r\n        if (col < this.state.axisStartCol - 1) {\r\n          // console.log(\"edge\");\r\n          this.setState({ distancing2: (this.state.axisStartCol - 1) * this.state.distancing, col21: 0, col22: this.state.len2 - 1 });\r\n        }\r\n        else if (col + this.state.len2 + 1 > this.state.axisStartCol + this.state.axisEndCol) {\r\n          const endCol = this.state.axisEndCol - this.state.len2;\r\n          this.setState({ distancing2: this.state.distancing * (this.state.axisStartCol + endCol - 1), col21: endCol, col22: endCol + this.state.len2 - 1 })\r\n        }\r\n        else {\r\n          this.setState({ distancing2: this.state.distancing * col, col21: colRelative - variance, col22: colRelative - variance + this.state.len2 - 1 });\r\n        }\r\n        this.curveArea();\r\n      }\r\n      else if (dragger === 1) {\r\n        const variance = this.state.axisStartCol - this.state.variance1;\r\n        if (col < this.state.axisStartCol - 1) {\r\n          this.setState({ distancing1: (this.state.axisStartCol - 1) * this.state.distancing, col11: 0, col12: this.state.len1 - 1 });\r\n        }\r\n        else if (col + this.state.len1 + 1 > this.state.axisStartCol + this.state.axisEndCol) {\r\n          const endCol = this.state.axisEndCol - this.state.len1;\r\n          this.setState({ distancing1: this.state.distancing * (this.state.axisStartCol + endCol - 1), col11: endCol, col12: endCol + this.state.len1 - 1 })\r\n        }\r\n        else {\r\n          this.setState({ distancing1: this.state.distancing * col, col11: colRelative - variance, col12: colRelative - variance + this.state.len1 - 1 });\r\n        }\r\n        this.curveArea();\r\n      }\r\n    }\r\n    else {\r\n      col = col - 1;\r\n      if (dragger === 2) {\r\n        // colRelative = colRelative - this.state.axisStartCol + this.state.variance2;\r\n        if (col + this.state.triCentCol2 < this.state.axisStartCol) {\r\n          this.setState({ distancing2: (this.state.variance2) * this.state.distancing, col21: 0, col22: this.state.len2 - 1 });\r\n        }\r\n        else if (col + this.state.triCentCol2 > this.state.axisStartCol + this.state.axisEndCol) {\r\n          this.setState({ distancing2: this.state.distancing * (this.state.variance2 + this.state.axisEndCol), col21: this.state.axisEndCol, col22: this.state.axisEndCol + this.state.len2 - 1 })\r\n        }\r\n        else {\r\n          this.setState({ distancing2: this.state.distancing * col, col21: colRelative, col22: colRelative + this.state.len2 - 1 });\r\n        }\r\n        this.curveArea();\r\n      }\r\n      else if (dragger === 1) {\r\n        // colRelative = colRelative - this.state.axisStartCol + this.state.variance1;\r\n        if (col + this.state.triCentCol1 < this.state.axisStartCol) {\r\n          this.setState({ distancing1: (this.state.variance1) * this.state.distancing, col11: 0, col12: this.state.len1 - 1 });\r\n        }\r\n        else if (col + this.state.triCentCol1 > this.state.axisStartCol + this.state.axisEndCol) {\r\n          this.setState({ distancing1: this.state.distancing * (this.state.variance1 + this.state.axisEndCol), col11: this.state.axisEndCol, col12: this.state.axisEndCol + this.state.len1 - 1 })\r\n        }\r\n        else {\r\n          this.setState({ distancing1: this.state.distancing * col, col11: colRelative, col12: colRelative + this.state.len1 - 1 });\r\n        }\r\n        this.curveArea();\r\n      }\r\n    }\r\n  }\r\n\r\n  triMouseDown(e, num) {\r\n    if (e.type === \"mousedown\") {\r\n      e.preventDefault();\r\n      var svgPre = this.svgRef.current;\r\n      // Set mousePointerRange so that we know the distance\r\n      // from the mouse tip to the x-value of the triangle\r\n      // tip\r\n      var ptPre = svgPre.createSVGPoint();\r\n      ptPre.x = e.clientX;\r\n      var svgPPre = ptPre.matrixTransform(svgPre.getScreenCTM().inverse());\r\n      if (num === 1) {\r\n        this.setState(prevState => ({\r\n          // rectX : svgP.x,\r\n          triDown: num,\r\n          mousePointerRange: prevState.triCent1 + this.state.distancing1 - svgPPre.x\r\n        }));\r\n      }\r\n      else if (num === 2) {\r\n        this.setState(prevState => ({\r\n          triDown: num,\r\n          mousePointerRange: prevState.triCent2 + this.state.distancing2 - svgPPre.x\r\n        }));\r\n      }\r\n    }\r\n  }\r\n\r\n  triDrag(e) {\r\n      e.preventDefault();\r\n      var dragger = this.state.triDown;\r\n      var cols = this.svgColReturn(e, dragger);\r\n      var col = cols[0];\r\n      var colRelative = cols[1]\r\n      this.svgColPlacement(col, colRelative, dragger);\r\n      this.curveArea();\r\n  }\r\n\r\n  triUp(e) {\r\n    if (this.state.triDown) {\r\n      this.setState({ triDown: false });\r\n    }\r\n  }\r\n\r\n  curveArea() {\r\n    let col11;\r\n    let col12;\r\n    let col21;\r\n    let col22;\r\n\r\n    if (this.state.edgeLim) {\r\n      col11 = this.state.col11;\r\n      col12 = this.state.col12;\r\n      col21 = this.state.col21;\r\n      col22 = this.state.col22;\r\n    }\r\n    else {\r\n      col11 = this.state.col11 + this.state.variance1;\r\n      col12 = this.state.col12 + this.state.variance1;\r\n      col21 = this.state.col21 + this.state.variance2;\r\n      col22 = this.state.col22 + this.state.variance2;\r\n    }\r\n\r\n    if (col11 > col22 || col12 < col21) {\r\n      this.areaRef.current.innerHTML = 0;\r\n    }\r\n    else {\r\n      this.areaRef.current.innerHTML = this.state.overlapVals[Math.abs(col22 - col11)];\r\n    }\r\n  }\r\n\r\n  updateTag1(e) {\r\n    e.preventDefault()\r\n    var x = e.clientX,\r\n        y = e.clientY;\r\n\r\n    const elem = this.tagRef1.current;\r\n    elem.style.top = (y + 5) + 'px';\r\n    elem.style.left = (x + 5) + 'px';\r\n  }\r\n\r\n  updateTag2(e) {\r\n    e.preventDefault();\r\n    var x = e.clientX,\r\n        y = e.clientY;\r\n\r\n    const elem = this.tagRef2.current;\r\n    elem.style.top = (y + 5) + 'px';\r\n    elem.style.left = (x + 5) + 'px';\r\n  }\r\n\r\n  displayTag1(e) {\r\n    e.preventDefault();\r\n    this.tagRef1.current.style.display = \"block\";\r\n  }\r\n\r\n  displayTag2(e) {\r\n    e.preventDefault();\r\n    this.tagRef2.current.style.display = \"block\";\r\n  }\r\n\r\n  hideTag1(e) {\r\n    e.preventDefault();\r\n    this.tagRef1.current.style.display = \"none\";\r\n  }\r\n\r\n  hideTag2(e) {\r\n    e.preventDefault();\r\n    this.tagRef2.current.style.display = \"none\";\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div \r\n        onMouseMove={e => this.triDrag(e)}\r\n        onMouseUp={e => this.triUp(e)}>\r\n        <div className=\"container\">\r\n          <h3>Question: </h3>\r\n          <div style={{ width: \"60%\", margin: \"auto\" }}>\r\n            <p style={{ textAlign: \"left\" }}>\r\n              {this.props.questionNC}\r\n            </p>\r\n          </div>\r\n        </div> \r\n        <svg width={this.state.svgWidth} height={this.state.svgHeight + 10} ref={this.svgRef}>\r\n          {/* <rect opacity=\"0.2\" width=\"100%\" height=\"100%\" fill=\"red\"/> */}\r\n          {[...Array(this.state.len1).keys()].map(\r\n            (col) =>\r\n              [...Array(this.state.colValHeiS[col]).keys()].map(\r\n                (row) => this.dotReturn(col, row)\r\n              )\r\n          )}\r\n          {[...Array(this.state.len2).keys()].map(\r\n            (col) =>\r\n              [...Array(this.state.colValHeiS2[col]).keys()].map(\r\n                (row) => this.dotReturn2(col, row)\r\n              )\r\n          )}\r\n          {/* <rect width={this.state.cursorWidth} fill=\"#000\" x={this.state.rectX} y=\"5\" height=\"150\"\r\n                    onMouseDown={e => this.dragMouseDown(e)}\r\n                    \r\n                    // onMouseMove={e => this.elementDrag(e)}\r\n                    ref={this.rectRef}\r\n                    ></rect> */}\r\n          <rect width={this.state.axisEnd}\r\n            height=\"2\"\r\n            fill=\"black\"\r\n            x={this.state.axisStartCol * this.state.distancing - 1}\r\n            y={this.state.ceilDist + 20} />\r\n          <rect width=\"2\"\r\n            height=\"20\"\r\n            fill=\"black\"\r\n            x={this.state.axisStartCol * this.state.distancing - 1}\r\n            y={this.state.ceilDist + 20} />\r\n          <rect width=\"2\"\r\n            height=\"20\"\r\n            fill=\"black\"\r\n            x={this.state.axisEnd + this.state.axisStartCol * this.state.distancing - 1}\r\n            y={this.state.ceilDist + 20} />\r\n          {/* triangle rendering below */}\r\n          {this.returnTri1()}\r\n          {this.returnTri2()}\r\n          {[...Array(this.state.tickNum).keys()].map(\r\n            (tick) =>\r\n              <rect\r\n                width=\"2\"\r\n                height=\"20\"\r\n                fill=\"black\"\r\n                x={this.state.axisStart + (this.state.tickDist * (tick + 1)) - 1} \r\n                y={this.state.ceilDist + 20}\r\n              />\r\n          )}\r\n          {[...Array(this.state.tickNum).keys()].map(\r\n            (tick) =>\r\n            <text \r\n            textAnchor=\"middle\" \r\n            x={this.state.axisStart + (this.state.tickDist * (tick + 1)) - 1} \r\n            y={this.state.ceilDist + 55}>\r\n              {this.state.lowVal + (this.state.rangeVal * (tick + 1))}\r\n            </text>\r\n          )}\r\n          <text text-anchor=\"middle\" x={this.state.axisStart} y={this.state.ceilDist + 55}>{this.state.lowVal}</text>\r\n          <text text-anchor=\"middle\" x={this.state.axisStart + this.state.axisEnd} y={this.state.ceilDist + 55}>{this.state.lowVal + this.state.colNum}</text>\r\n          Sorry, please use a different browser.\r\n        </svg>\r\n        <br />\r\n        <div class=\"boxed\">\r\n          <div class=\"color-box\" style={{ backgroundColor: this.state.color1 }}></div>\r\n          {this.props.graph1}\r\n          <br />\r\n          <div class=\"color-box\" style={{ backgroundColor: this.state.color2 }}></div>\r\n          {this.props.graph2}\r\n        </div>\r\n        <br />\r\n        <h4>First x-coordinate: {this.state.col11} | Second x-coordinate: {this.state.col21} </h4>\r\n        <span style={{ color: \"white\" }} ref={this.areaRef}></span>\r\n        {\r\n          !this.state.submitted && \r\n          <div>\r\n            <input type=\"submit\" className=\"btn\" value=\"Ok\"\r\n              onClick={this.onSubmit}/> <br/>\r\n            <p style={{ color: \"grey\", width: \"40%\", margin: \"auto\" }}>\r\n              Reminder: Once you click \"OK\", your response to this question \r\n              will be recorded, and you won't be able to change your answer. \r\n            </p>\r\n          </div>\r\n        }\r\n        <span \r\n        className=\"tag1\" \r\n        ref={this.tagRef1}\r\n        >{this.props.graph1}</span>\r\n        \r\n        <span \r\n        className=\"tag2\" \r\n        ref={this.tagRef2}\r\n        >{this.props.graph2}</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nNormalCurveSurvey.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storeAnswer: PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, storeAnswer }\r\n)(NormalCurveSurvey);","import React, { Component } from 'react';\r\nimport * as d3 from \"d3\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport './HistSlider.css';\r\n\r\nimport {\r\n  getExpt,\r\n  storeAnswer\r\n} from \"../actions/dataActions\";\r\n\r\nclass Histogram extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.sliderRef = React.createRef();\r\n    this.graphRef = React.createRef();\r\n    this.qRef = React.createRef();\r\n    this.minRef = React.createRef();\r\n    this.maxRef = React.createRef();\r\n\r\n    this.state = this.initialState;\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.resetState = this.resetState.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  get initialState() {\r\n    return {\r\n      submitted: false,\r\n      checked: false,\r\n      minVal: Number,\r\n      maxVal: Number,\r\n      sliderPos: Number\r\n    }\r\n  }\r\n\r\n    resetState() {\r\n    this.setState(this.initialState);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { childRef } = this.props;\r\n    childRef(this);\r\n    this.getData();\r\n    this.drawChart();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { childRef } = this.props;\r\n    childRef(undefined);\r\n  }\r\n\r\n  getData() {\r\n    const db = this.props.expt.dbInfo.db;\r\n    const studyName = this.props.expt.dbInfo.col.split(\"-\")[0];\r\n    const exptName = this.props.expt.dbInfo.col.split(\"-\")[1];\r\n    this.props.getExpt(db, studyName, exptName);\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n\r\n  onSubmit() {\r\n    const question = this.props.questionHistKey;\r\n    const answer = this.state.sliderPos;\r\n    this.props.storeAnswer(question, answer);\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  drawChart() {\r\n    const data = this.props.histData.data;\r\n\r\n    const svg = d3.select(this.graphRef.current).append(\"svg\")\r\n      .attr(\"width\", this.props.histData.width)\r\n      .attr(\"height\", this.props.histData.height)\r\n\r\n    svg.selectAll(\"rect\")\r\n      .data(data)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"x\", (d, i) => i * this.props.histData.width / data.length)\r\n      .attr(\"y\", (d, i) => this.props.histData.height - 10 * d)\r\n      .attr(\"width\", this.props.histData.width / data.length - 10)\r\n      .attr(\"height\", (d, i) => d * 10)\r\n      .attr(\"fill\", \"#4CAF50\")\r\n      .attr(\"opacity\", 0.5)\r\n\r\n    svg.selectAll(\"text\")\r\n      .data(data)\r\n      .enter()\r\n      .append(\"text\")\r\n      .text((d) => d)\r\n      .attr(\"x\", (d, i) => i * this.props.histData.width / data.length)\r\n      .attr(\"y\", (d, i) => this.props.histData.height - (10 * d) - 3)\r\n  }\r\n\r\n  render() {\r\n    const vertAlign = this.props.histData.height / 2;\r\n    // const step_size = this.props.width / this.props.data.length;\r\n    return (\r\n      <div>\r\n        <b>Question: </b> <br/>\r\n        {this.props.questionHist}\r\n        <div ref={this.graphRef}\r\n          style={{ \r\n            position: \"relative\", \r\n            width: this.props.histData.width, \r\n            margin: \"auto\" }}>\r\n          <div \r\n            style={{ \r\n              position: \"absolute\",\r\n              top: vertAlign}}>\r\n            <input type=\"range\" min={this.props.histLowRange} max={this.props.histHighRange} \r\n              className=\"hist-slider\" onChange={this.onChange}\r\n              name=\"sliderPos\" value={this.state.sliderPos}\r\n              step={this.props.histData.step} ref={this.sliderRef}\r\n              style={{ width: this.props.histData.width }}/>\r\n          </div>\r\n        </div>\r\n        {this.props.histLowRange}\r\n        <input type=\"range\" class=\"dummy-slider\" \r\n          style={{ width: this.props.histData.width }} onChange={this.onChange}\r\n          name=\"sliderPos\" value={this.state.sliderPos} \r\n          step={this.props.histData.step}\r\n          min={this.props.histLowRange} max={this.props.histHighRange} />\r\n        {this.props.histHighRange}\r\n        <br/>\r\n        Slider Position: {this.state.sliderPos}\r\n        \r\n        <br/><br/>\r\n          {\r\n          !this.state.submitted && \r\n          <div>\r\n            <input type=\"submit\" className=\"btn\" value=\"Ok\"\r\n              onClick={this.onSubmit}/> <br/>\r\n            <p style={{ color: \"grey\" }}>\r\n              Reminder: Once you click \"Ok\", your response to this question \r\n              will be recorded, and you won't be able to change your answer. \r\n            </p>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nHistogram.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storeAnswer: PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, storeAnswer }\r\n)(Histogram);","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { \r\n  getExpt,\r\n  sendExpt,\r\n  setNumQ,\r\n  isFinalQ\r\n} from \"../actions/dataActions\";\r\n\r\nimport Slider from \"../items/Slider\";\r\nimport StaticText from \"../items/StaticText\";\r\nimport NormalCurve from \"../items/NormalCurve.jsx\";\r\nimport NormalCurveSurvey from \"../items/NormalCurveSurvey\";\r\nimport Histogram from \"../items/Histogram\";\r\n\r\nclass Experiment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      whichItem: \"\"\r\n    }\r\n\r\n    this.onNextQuestion = this.onNextQuestion.bind(this);\r\n    this.onFinalSubmit = this.onFinalSubmit.bind(this);\r\n    this.whichSubmit = this.whichSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.match.params.expt;\r\n    if (!this.props.expt.participantID) {\r\n      alert(\"Please enter your unique ID\");\r\n      this.props.history.push(\"/expt/\" + username + \"/\" + expt);\r\n    }\r\n  }\r\n\r\n  // method to push user to the next question \r\n  nextQuestion() {\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.match.params.expt;\r\n    const nextQ = this.props.expt.questionKeys[this.props.expt.numQ + 1];\r\n    const lastQ = this.props.expt.questionKeys[this.props.expt.questionKeys.length - 1];\r\n    if (nextQ == lastQ) {\r\n      this.props.isFinalQ(true);\r\n    }\r\n    this.props.setNumQ(this.props.expt.numQ + 1);\r\n    this.props.history.push(\"/expt/\" + username + \"/\" + expt + \r\n      \"/\" + nextQ.toString());\r\n  }\r\n\r\n  // will be triggered when the next question is not the final question\r\n  onNextQuestion() {\r\n    // ###TODO###: add more if statements below that follow the templates \r\n    if (this.childSlider) {\r\n      this.childSlider.resetState();\r\n      this.nextQuestion();\r\n    };\r\n    if (this.childNormalCurve) {\r\n      this.childNormalCurve.resetState();\r\n      this.nextQuestion();\r\n    }; \r\n    if (this.childStaticText) {\r\n      this.nextQuestion();\r\n    };\r\n  }\r\n\r\n  // will be triggered when the next question is the final question \r\n  onFinalSubmit() {\r\n    this.props.history.push(\"/success\");\r\n  }\r\n\r\n  // decides which button to show for the next question based whether the next\r\n  // question is the final question of the experiment\r\n  whichSubmit() {\r\n    return (\r\n      <div>\r\n        {\r\n          !this.props.expt.isFinalQ ? \r\n          <div>\r\n            Please click \"OK\" above before clicking \"Next Question\" <br/><br/>\r\n            <input type=\"submit\" className=\"btn\" value=\"Next Question\"\r\n              onClick={this.onNextQuestion}/>\r\n          </div> :\r\n          <div>\r\n            Please click \"OK\" above before clicking \"Submit\" <br/><br/>\r\n            This is the final question. <p></p>\r\n            <input type=\"submit\" className=\"btn\" value=\"Submit\"\r\n              onClick={this.onFinalSubmit}/>\r\n            <div>\r\n              <br/><br/><br/>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  getData() {\r\n    const username = this.props.match.params.username;\r\n    // there will be problems if user's study name / experiment name inclues \"-\"\r\n    const studyName = this.props.match.params.expt.split(\"-\")[0];\r\n    const exptName = this.props.match.params.expt.split(\"-\")[1];\r\n    this.props.getExpt(username, studyName, exptName);\r\n  }\r\n\r\n  displayExpt() {\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.expt.exptToDisplay;\r\n    const key = this.props.match.params.qKey;\r\n    if (expt[key]) {\r\n      // ###TODO### add more if statements here for your experiment type\r\n      // follow the following format\r\n      // ATTENTION: do NOT call methods (especially those associated with API)\r\n      // inside these cases. React keeps rendering displayExpt(), which means\r\n      // your method(s) will be called repeatedly => not good. \r\n      switch(expt[key][\"Type\"]) {\r\n        case \"slider\":\r\n          const lowRange = expt[key][\"lowRange\"];\r\n          const highRange = expt[key][\"highRange\"];\r\n          const question = expt[key][\"Question\"];\r\n          const sliderCSVKey = expt[key][\"slider-key\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <Slider childRef={ref => (this.childSlider = ref)}\r\n                question={question} sliderCSVKey={sliderCSVKey}\r\n                lowRange={lowRange} highRange={highRange} />\r\n              <br/>\r\n              {/* keep the following line */}\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n          break;\r\n        case \"static-text\":\r\n          const text = expt[key][\"Static Text\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <StaticText childRef={ref => (this.childStaticText = ref)}\r\n                text={text}/>\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        case \"normal-curve\":\r\n          const questionNC = expt[key][\"Question\"];\r\n          const graph1 = expt[key][\"graph1key\"];\r\n          const graph2 = expt[key][\"graph2key\"];\r\n          const questionNCKey = expt[key][\"normal-curve-question-key\"];\r\n          const graph1legend = expt[key][\"normal-curve-legend-key1\"];\r\n          const graph2legend = expt[key][\"normal-curve-legend-key2\"];\r\n          const dataFileName = expt[key][\"FileName\"];\r\n          const dataFileContent = expt[key][\"FileContent\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <NormalCurveSurvey childRef={ref => (this.childNormalCurve = ref)} \r\n                questionNC={questionNC} graph1={graph1} graph2={graph2} \r\n                questionNCKey={questionNCKey} \r\n                graph1legend={graph1legend}\r\n                graph2legend={graph2legend}\r\n                fileName={dataFileName} data={dataFileContent} />\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        case \"threshold\":\r\n          const questionHist = expt[key][\"Question\"];\r\n          const questionHistKey = expt[key][\"threshold-key\"];\r\n          const histLowRange = expt[key][\"lowRange\"];\r\n          const histHighRange = expt[key][\"highRange\"];\r\n          const histFileContent = expt[key][\"FileContent\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <Histogram childRef={ref => (this.childHistogram = ref)} \r\n                questionHist={questionHist} \r\n                questionHistKey={questionHistKey}\r\n                histLowRange={histLowRange}\r\n                histHighRange={histHighRange} histData={histFileContent} />\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        default: \r\n          return (<div>Unknown Experiment Type</div>)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const exptName = this.props.match.params.expt;\r\n    const participant = this.props.expt.participantID;\r\n    return (\r\n      <div className=\"container\">\r\n      Experiment name: <br/>\r\n      <b>{exptName}</b>\r\n      <br/>\r\n      Participant ID: <br/>\r\n      <b>{participant}</b>\r\n      <br/><br/>\r\n      {this.displayExpt()}\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nExperiment.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  participantID: PropTypes.string.isRequired,\r\n  sendExpt: PropTypes.func.isRequired,\r\n  setNumQ: PropTypes.func.isRequired,\r\n  isFinalQ: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n  participantID: state.participantID\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, sendExpt, setNumQ, isFinalQ }\r\n)(Experiment);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  sendExpt\r\n} from \"../actions/dataActions\"\r\n\r\nclass Success extends Component {\r\n  componentDidMount() {\r\n    // console.log(this.props);\r\n    const username = this.props.expt.dbInfo.db;\r\n    const expt = this.props.expt.dbInfo.col;\r\n    // console.log(this.props.expt.exptToDisplay);\r\n    if (!this.props.expt.answer.length == 0) {\r\n      const finalObj = {\r\n        participantID: this.props.expt.participantID\r\n      }\r\n      this.props.expt.answer.map(entry => {\r\n        finalObj[entry.que] = entry.ans\r\n      })\r\n      finalObj[\"condition\"] = this.props.expt.exptToDisplay.condition;\r\n      // console.log(finalObj);\r\n      this.props.sendExpt(username, expt, finalObj);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const link = this.props.expt.exptToDisplay.link;\r\n    const participantID = this.props.expt.participantID;\r\n    return (\r\n      <div className=\"container\">\r\n        <h1>Thank you for your submission!</h1> <br/>\r\n        You are <b>67%</b> done with the experiment! Now you will need to:  <br/><br/>\r\n        1. Please copy your ID shown below: <br/>\r\n        <b>{participantID}</b> <br/> \r\n        2. Please click on this <a href={link} target=\"_blank\">link</a>, paste your ID in the first page and complete the final survey. \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSuccess.propTypes = {\r\n  sendExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { sendExpt }\r\n)(Success);\r\n","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { \r\n  storeDBInfo,\r\n  storePartID, \r\n  getExpt,\r\n  storeQKeys,\r\n  setNumQ,\r\n  isFinalQ\r\n} \r\nfrom \"../actions/dataActions\";\r\n\r\nclass PreviewEnterID extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ParticipantID: ''\r\n    }\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.showExpt = this.showExpt.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n\r\n    const username = this.props.match.params.username;\r\n    const studyExpt = this.props.match.params.expt;\r\n    this.props.storeDBInfo(username, studyExpt);\r\n  }\r\n\r\n  getData() {\r\n    const username = this.props.match.params.username;\r\n    const studyName = this.props.match.params.expt.split(\"-\")[0];\r\n    const exptName = this.props.match.params.expt.split(\"-\")[1];\r\n    this.props.getExpt(username, studyName, exptName);\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value })\r\n  }\r\n\r\n  showExpt() {\r\n    this.props.storePartID(this.state.ParticipantID);\r\n    const username = this.props.match.params.username;\r\n    const studyExpt = this.props.match.params.expt;\r\n    var questionKeys = [];\r\n    if (this.props.expt.exptToDisplay) {\r\n      const allKeys = Object.keys(this.props.expt.exptToDisplay);\r\n      console.log(allKeys);\r\n      // in the JSON file each question must have index q0, q1, q2, ... \r\n      questionKeys = allKeys.filter(str => str.charAt(0) == \"q\");\r\n      this.props.storeQKeys(questionKeys);\r\n    }\r\n    // console.log(questionKeys);\r\n    if (questionKeys.length == 1) {\r\n      this.props.isFinalQ(true);\r\n    }\r\n    this.props.setNumQ(0);\r\n    this.props.history.push(\"/preview/\" + username + \"/\" + studyExpt + \r\n      \"/\" + questionKeys[0]);\r\n  }\r\n\r\n  render() {\r\n    const exptName = this.props.match.params.expt;\r\n      return (\r\n        <div className=\"container\">\r\n        Experiment name: <br/>\r\n        <b>{exptName}</b>\r\n        <br/><br/>\r\n        Enter your unique ID: <p></p>\r\n        <input type=\"text\" name=\"ParticipantID\" \r\n          value={this.state.ParticipantID} onChange={this.onChange}/>\r\n        <br/>\r\n        <input type=\"button\" className=\"btn\" value=\"Start Experiment\" \r\n          onClick={this.showExpt}/>\r\n        <br/><br/>\r\n        Hi Researchers! You may enter any ID to preview your experiment. <br/>\r\n        Note: experiment preview will <b>NOT</b> record any data. \r\n      </div>\r\n      )\r\n  }\r\n}\r\n\r\nPreviewEnterID.propTypes = {\r\n  storeDBInfo: PropTypes.func.isRequired,\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  storePartID: PropTypes.func.isRequired,\r\n  participantID: PropTypes.string.isRequired,\r\n  storeQKeys: PropTypes.func.isRequired,\r\n  setNumQ: PropTypes.func.isRequired,\r\n  isFinalQ: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n  participantID: state.participantID\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { storeDBInfo, storePartID, getExpt, storeQKeys, setNumQ, isFinalQ }\r\n)(PreviewEnterID);\r\n","import React, { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { \r\n  getExpt,\r\n  sendExpt,\r\n  setNumQ,\r\n  isFinalQ\r\n} from \"../actions/dataActions\";\r\n\r\nimport Slider from \"../items/Slider\";\r\nimport StaticText from \"../items/StaticText\";\r\nimport NormalCurve from \"../items/NormalCurve.jsx\";\r\nimport NormalCurveSurvey from \"../items/NormalCurveSurvey\";\r\nimport Histogram from \"../items/Histogram\";\r\n\r\nclass Experiment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      whichItem: \"\"\r\n    }\r\n\r\n    this.onNextQuestion = this.onNextQuestion.bind(this);\r\n    this.onFinalSubmit = this.onFinalSubmit.bind(this);\r\n    this.whichSubmit = this.whichSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.match.params.expt;\r\n    if (!this.props.expt.participantID) {\r\n      alert(\"Please enter your unique ID\");\r\n      this.props.history.push(\"/preview/\" + username + \"/\" + expt);\r\n    }\r\n  }\r\n\r\n  // method to push user to the next question \r\n  nextQuestion() {\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.match.params.expt;\r\n    const nextQ = this.props.expt.questionKeys[this.props.expt.numQ + 1];\r\n    const lastQ = this.props.expt.questionKeys[this.props.expt.questionKeys.length - 1];\r\n    if (nextQ == lastQ) {\r\n      this.props.isFinalQ(true);\r\n    }\r\n    this.props.setNumQ(this.props.expt.numQ + 1);\r\n    this.props.history.push(\"/preview/\" + username + \"/\" + expt + \r\n      \"/\" + nextQ.toString());\r\n  }\r\n\r\n  // will be triggered when the next question is not the final question\r\n  onNextQuestion() {\r\n    // ###TODO###: add more if statements below that follow the templates \r\n    if (this.childSlider) {\r\n      this.childSlider.resetState();\r\n      this.nextQuestion();\r\n    };\r\n    if (this.childNormalCurve) {\r\n      this.childNormalCurve.resetState();\r\n      this.nextQuestion();\r\n    }; \r\n    if (this.childStaticText) {\r\n      this.nextQuestion();\r\n    };\r\n  }\r\n\r\n  // will be triggered when the next question is the final question \r\n  onFinalSubmit() {\r\n    this.props.history.push(\"/previewSuccess\");\r\n  }\r\n\r\n  // decides which button to show for the next question based whether the next\r\n  // question is the final question of the experiment\r\n  whichSubmit() {\r\n    return (\r\n      <div>\r\n        {\r\n          !this.props.expt.isFinalQ ? \r\n          <div>\r\n            Please click \"OK\" above before clicking \"Next Question\" <br/><br/>\r\n            <input type=\"submit\" className=\"btn\" value=\"Next Question\"\r\n              onClick={this.onNextQuestion}/>\r\n          </div> :\r\n          <div>\r\n            Please click \"OK\" above before clicking \"Submit\" <br/><br/>\r\n            This is the final question. <p></p>\r\n            <input type=\"submit\" className=\"btn\" value=\"Submit\"\r\n              onClick={this.onFinalSubmit}/>\r\n            <div>\r\n              <br/><br/><br/>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  getData() {\r\n    const username = this.props.match.params.username;\r\n    // there will be problems if user's study name / experiment name inclues \"-\"\r\n    const studyName = this.props.match.params.expt.split(\"-\")[0];\r\n    const exptName = this.props.match.params.expt.split(\"-\")[1];\r\n    this.props.getExpt(username, studyName, exptName);\r\n  }\r\n\r\n  displayExpt() {\r\n    const username = this.props.match.params.username;\r\n    const expt = this.props.expt.exptToDisplay;\r\n    const key = this.props.match.params.qKey;\r\n    if (expt[key]) {\r\n      // ###TODO### add more if statements here for your experiment type\r\n      // follow the following format\r\n      // ATTENTION: do NOT call methods (especially those associated with API)\r\n      // inside these cases. React keeps rendering displayExpt(), which means\r\n      // your method(s) will be called repeatedly => not good. \r\n      switch(expt[key][\"Type\"]) {\r\n        case \"slider\":\r\n          const lowRange = expt[key][\"lowRange\"];\r\n          const highRange = expt[key][\"highRange\"];\r\n          const question = expt[key][\"Question\"];\r\n          const sliderCSVKey = expt[key][\"slider-key\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <Slider childRef={ref => (this.childSlider = ref)}\r\n                question={question} sliderCSVKey={sliderCSVKey}\r\n                lowRange={lowRange} highRange={highRange} />\r\n              <br/>\r\n              {/* keep the following line */}\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n          break;\r\n        case \"static-text\":\r\n          const text = expt[key][\"Static Text\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <StaticText childRef={ref => (this.childStaticText = ref)}\r\n                text={text}/>\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        case \"normal-curve\":\r\n          const questionNC = expt[key][\"Question\"];\r\n          const graph1 = expt[key][\"graph1key\"];\r\n          const graph2 = expt[key][\"graph2key\"];\r\n          const questionNCKey = expt[key][\"normal-curve-question-key\"];\r\n          const graph1legend = expt[key][\"normal-curve-legend-key1\"];\r\n          const graph2legend = expt[key][\"normal-curve-legend-key2\"];\r\n          const dataFileName = expt[key][\"FileName\"];\r\n          const dataFileContent = expt[key][\"FileContent\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <NormalCurveSurvey childRef={ref => (this.childNormalCurve = ref)} \r\n                questionNC={questionNC} graph1={graph1} graph2={graph2} \r\n                questionNCKey={questionNCKey} \r\n                graph1legend={graph1legend}\r\n                graph2legend={graph2legend}\r\n                fileName={dataFileName} data={dataFileContent} />\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        case \"threshold\":\r\n          const questionHist = expt[key][\"Question\"];\r\n          const questionHistKey = expt[key][\"threshold-key\"];\r\n          const histLowRange = expt[key][\"lowRange\"];\r\n          const histHighRange = expt[key][\"highRange\"];\r\n          const histFileContent = expt[key][\"FileContent\"];\r\n          return (\r\n            <div className=\"container\">\r\n              <Histogram childRef={ref => (this.childHistogram = ref)} \r\n                questionHist={questionHist} \r\n                questionHistKey={questionHistKey}\r\n                histLowRange={histLowRange}\r\n                histHighRange={histHighRange} histData={histFileContent} />\r\n              <br/>\r\n              <this.whichSubmit />\r\n            </div>\r\n          )\r\n        default: \r\n          return (<div>Unknown Experiment Type</div>)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const exptName = this.props.match.params.expt;\r\n    const participant = this.props.expt.participantID;\r\n    return (\r\n      <div className=\"container\">\r\n      Experiment name: <br/>\r\n      <b>{exptName}</b>\r\n      <br/>\r\n      Participant ID: <br/>\r\n      <b>{participant}</b>\r\n      <br/><br/>\r\n      {this.displayExpt()}\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nExperiment.propTypes = {\r\n  getExpt: PropTypes.func.isRequired,\r\n  expt: PropTypes.object.isRequired,\r\n  participantID: PropTypes.string.isRequired,\r\n  sendExpt: PropTypes.func.isRequired,\r\n  setNumQ: PropTypes.func.isRequired,\r\n  isFinalQ: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n  participantID: state.participantID\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getExpt, sendExpt, setNumQ, isFinalQ }\r\n)(Experiment);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass PreviewSuccess extends Component {\r\n  componentDidMount() {\r\n    // console.log(this.props);\r\n    const username = this.props.expt.dbInfo.db;\r\n    const expt = this.props.expt.dbInfo.col;\r\n    if (!this.props.expt.answer.length == 0) {\r\n      const finalObj = {\r\n        participantID: this.props.expt.participantID\r\n      }\r\n      this.props.expt.answer.map(entry => {\r\n        finalObj[entry.que] = entry.ans\r\n      })\r\n      console.log(finalObj);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const link = this.props.expt.exptToDisplay.link;\r\n    const participantID = this.props.expt.participantID;\r\n    return (\r\n      <div className=\"container\">\r\n        <h1>Thank you for your submission!</h1> <br/>\r\n        You are <b>67%</b> done with the experiment! Now you will need to:  <br/><br/>\r\n        1. Please copy your ID shown below: <br/>\r\n        <b>{participantID}</b> <br/> \r\n        2. Please click on this <a href={link} target=\"_blank\">link</a>, paste your ID in the first page and complete the final survey. \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nPreviewSuccess.propTypes = {\r\n  expt: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  expt: state.expt,\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { }\r\n)(PreviewSuccess);\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { BrowserRouter as Router, Route, Switch, HashRouter } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nimport EnterID from \"./components/EnterID\";\r\nimport HomePage from \"./components/HomePage\";\r\nimport Experiment from \"./components/Experiment\";\r\nimport Success from \"./components/Success\";\r\n\r\nimport PreviewEnterID from \"./components/PreviewEnterID\";\r\nimport PreviewExpt from \"./components/PreviewExpt\";\r\nimport PreviewSuccess from \"./components/PreviewSuccess\"\r\n\r\nimport NormalCurveSurvey from \"./items/NormalCurveSurvey\";\r\nconst data = require('./inputDataPy2.json');\r\nconst data2 = require('./inputDataPy4.json');\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <HashRouter basename=\"/participant-app/\">\r\n        <div className=\"App\">\r\n          <Route exact path=\"/\" component={HomePage}/>\r\n          {/* <Route \r\n          exact path=\"/\" \r\n          component={\r\n            () => <NormalCurveSurvey data={data2} graph1=\"green\" graph2=\"red\" /> \r\n            }/> */}\r\n          <Route exact path=\"/success\" component={Success}/>\r\n          <Route exact path=\"/expt/:username/:expt\" component={EnterID}/>\r\n          <Route exact path=\"/expt/:username/:expt/:qKey\" component={Experiment}/>\r\n\r\n          <Route exact path=\"/previewSuccess\" component={PreviewSuccess}/>\r\n          <Route exact path=\"/preview/:username/:expt\" component={PreviewEnterID}/>\r\n          <Route exact path=\"/preview/:username/:expt/:qKey\" component={PreviewExpt}/>\r\n        </div>\r\n      </HashRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}