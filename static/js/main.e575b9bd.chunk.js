(this["webpackJsonpparticipant-app"]=this["webpackJsonpparticipant-app"]||[]).push([[0],{41:function(t,e,a){t.exports=a(72)},45:function(t,e,a){},46:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(18),s=a.n(i),o=(a(45),a(46),a(19)),p=a(2),c=a(12),l=a(15),u=a(39),h=a(40),m=a(8),b=(a(51),{dbInfo:{},exptToDisplay:{},participantID:"",questionKeys:[],isFinalQ:!1,answer:[]}),d=Object(l.c)({expt:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"DB_INFO":return Object(m.a)(Object(m.a)({},t),{},{dbInfo:e.payload});case"GET_EXPT":return Object(m.a)(Object(m.a)({},t),{},{exptToDisplay:e.payload});case"PART_ID":return Object(m.a)(Object(m.a)({},t),{},{participantID:e.payload});case"Q_KEYS":return Object(m.a)(Object(m.a)({},t),{},{questionKeys:e.payload});case"FINAL_Q":return Object(m.a)(Object(m.a)({},t),{},{isFinalQ:e.payload});case"ANSWER":return Object(m.a)(Object(m.a)({},t),{},{answer:[].concat(Object(h.a)(t.answer),[e.payload])});default:return t}}}),y=[u.a],f=Object(l.e)(d,{},Object(l.d)(l.a.apply(void 0,y))),v=a(17),E=a(10),x=a(11),O=a(4),g=a(14),j=a(13),k=a(20),D=a.n(k),S=function(t,e,a){return function(n){var r="https://test-api-615.herokuapp.com/api/feedback/"+t+"/info/studyName-"+e;D.a.get(r).then((function(t){var e=t.data.experiments,r={};e.forEach((function(t){t.exptName==a&&(r=t)})),n({type:"GET_EXPT",payload:r}),console.log("dispatched")}))}},w=function(t,e,a){return function(n){var r="https://test-api-615.herokuapp.com/api/feedback/"+t+"/"+e;D.a.post(r,a).then((function(t){}))}},I=function(t){return function(e){e({type:"FINAL_Q",payload:t})}},N=function(t,e){return function(a){a({type:"ANSWER",payload:{que:t,ans:e}})}},q=function(t){Object(g.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(E.a)(this,a),(n=e.call(this,t)).state={ParticipantID:""},n.onChange=n.onChange.bind(Object(O.a)(n)),n.showExpt=n.showExpt.bind(Object(O.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getData();var t=this.props.match.params.username,e=this.props.match.params.expt;this.props.storeDBInfo(t,e)}},{key:"getData",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt.split("-")[0],a=this.props.match.params.expt.split("-")[1];this.props.getExpt(t,e,a)}},{key:"onChange",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"showExpt",value:function(){this.props.storePartID(this.state.ParticipantID);var t=this.props.match.params.username,e=this.props.match.params.expt,a=[];this.props.expt.exptToDisplay&&(a=Object.keys(this.props.expt.exptToDisplay).filter((function(t){return"q"==t.charAt(0)})),this.props.storeQKeys(a));console.log(a),1==a.length&&this.props.isFinalQ(!0),this.props.history.push("/expt/"+t+"/"+e+"/"+a[0])}},{key:"render",value:function(){var t=this.props.match.params.expt;return r.a.createElement("div",{className:"container"},"Experiment name: ",r.a.createElement("br",null),r.a.createElement("b",null,t),r.a.createElement("br",null),r.a.createElement("br",null),"Enter your unique ID: ",r.a.createElement("p",null),r.a.createElement("input",{type:"text",name:"ParticipantID",value:this.state.ParticipantID,onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",className:"btn",value:"Start Experiment",onClick:this.showExpt}),r.a.createElement("br",null),r.a.createElement("br",null),'Note: once you click "Ok" for one question, you won\'t be able to change your response.')}}]),a}(n.Component),C=Object(c.b)((function(t){return{expt:t.expt,participantID:t.participantID}}),{storeDBInfo:function(t,e){return function(a){a({type:"DB_INFO",payload:{db:t,col:e}})}},storePartID:function(t){return function(e){e({type:"PART_ID",payload:t})}},getExpt:S,storeQKeys:function(t){return function(e){e({type:"Q_KEYS",payload:t})}},isFinalQ:I})(q),Q=function(t){Object(g.a)(a,t);var e=Object(j.a)(a);function a(){return Object(E.a)(this,a),e.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"This is the home page"))}}]),a}(n.Component),F=function(t){Object(g.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(E.a)(this,a),(n=e.call(this,t)).state=n.initialState,n.resetState=n.resetState.bind(Object(O.a)(n)),n.onChange=n.onChange.bind(Object(O.a)(n)),n.onSubmit=n.onSubmit.bind(Object(O.a)(n)),n.showSlider=n.showSlider.bind(Object(O.a)(n)),n}return Object(x.a)(a,[{key:"resetState",value:function(){this.setState(this.initialState)}},{key:"componentDidMount",value:function(){(0,this.props.childRef)(this),this.getData()}},{key:"componentWillUnmount",value:function(){(0,this.props.childRef)(void 0)}},{key:"getData",value:function(){var t=this.props.expt.dbInfo.db,e=this.props.expt.dbInfo.col.split("-")[0],a=this.props.expt.dbInfo.col.split("-")[1];this.props.getExpt(t,e,a)}},{key:"onChange",value:function(t){this.setState(Object(v.a)({},t.target.name,t.target.value))}},{key:"showSlider",value:function(){return r.a.createElement("div",{className:"container"},this.props.question," ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",min:this.props.lowRange,max:this.props.highRange,name:"value",value:this.state.value,onChange:this.onChange}),this.state.value," ",r.a.createElement("br",null))}},{key:"onSubmit",value:function(){var t=this.props.question;this.props.storeAnswer(t,this.state.value),this.setState({submitted:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,this.showSlider()," ",r.a.createElement("br",null),!this.state.submitted&&r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn",value:"Ok",onClick:this.onSubmit})," ",r.a.createElement("br",null),r.a.createElement("p",{style:{color:"grey"}},'Reminder: Once you click "Ok", your response to this question will be recorded, and you won\'t be able to change your answer.')))}},{key:"initialState",get:function(){return{submitted:!1,value:0}}}]),a}(n.Component),T=Object(c.b)((function(t){return{expt:t.expt}}),{getExpt:S,storeAnswer:N})(F),R=function(t){Object(g.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(E.a)(this,a),(n=e.call(this,t)).state={},n.onSubmit=n.onSubmit.bind(Object(O.a)(n)),n.onFinalSubmit=n.onFinalSubmit.bind(Object(O.a)(n)),n.whichSubmit=n.whichSubmit.bind(Object(O.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.getData();var t=this.props.match.params.username,e=this.props.match.params.expt;this.props.expt.participantID||(alert("Please enter your unique ID"),this.props.history.push("/expt/"+t+"/"+e))}},{key:"onSubmit",value:function(){this.child.resetState();var t=this.props.match.params.username,e=this.props.match.params.expt,a=this.props.match.params.qKey.charAt(1),n=Number(a)+1,r=this.props.expt.questionKeys[this.props.expt.questionKeys.length-1];n==Number(r.charAt(1))&&this.props.isFinalQ(!0),this.props.history.push("/expt/"+t+"/"+e+"/q"+n.toString())}},{key:"onFinalSubmit",value:function(){this.props.history.push("/success")}},{key:"whichSubmit",value:function(){return r.a.createElement("div",null,this.props.expt.isFinalQ?r.a.createElement("div",null,"This is the final question. ",r.a.createElement("p",null),r.a.createElement("input",{type:"submit",className:"btn",value:"Submit",onClick:this.onFinalSubmit})):r.a.createElement("input",{type:"submit",className:"btn",value:"Next Question",onClick:this.onSubmit}))}},{key:"getData",value:function(){var t=this.props.match.params.username,e=this.props.match.params.expt.split("-")[0],a=this.props.match.params.expt.split("-")[1];this.props.getExpt(t,e,a)}},{key:"displayExpt",value:function(){var t=this,e=this.props.expt.exptToDisplay,a=this.props.match.params.qKey;if(e[a]&&"slider"==e[a].Type){var n=e[a].lowRange,i=e[a].highRange,s=e[a].Question;return r.a.createElement("div",{className:"container"},r.a.createElement(T,{childRef:function(e){return t.child=e},question:s,lowRange:n,highRange:i}),r.a.createElement("br",null),r.a.createElement(this.whichSubmit,null))}}},{key:"render",value:function(){var t=this.props.match.params.expt,e=this.props.expt.participantID;return r.a.createElement("div",{className:"container"},"Experiment name: ",r.a.createElement("br",null),r.a.createElement("b",null,t),r.a.createElement("br",null),"Participant ID: ",r.a.createElement("br",null),r.a.createElement("b",null,e),r.a.createElement("br",null),r.a.createElement("br",null),this.displayExpt())}}]),a}(n.Component),A=Object(c.b)((function(t){return{expt:t.expt,participantID:t.participantID}}),{getExpt:S,sendExpt:w,isFinalQ:I,storeAnswer:N})(R),P=function(t){Object(g.a)(a,t);var e=Object(j.a)(a);function a(){return Object(E.a)(this,a),e.apply(this,arguments)}return Object(x.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props);var t=this.props.expt.dbInfo.db,e=this.props.expt.dbInfo.col;if(0==!this.props.expt.answer.length){var a={participantID:this.props.expt.participantID};this.props.expt.answer.map((function(t){a[t.que]=t.ans})),this.props.sendExpt(t,e,a)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Thank you for your submission!")," ",r.a.createElement("br",null),"Please go back to the Qualtrics survey and complete the rest of the questions.")}}]),a}(n.Component),K=Object(c.b)((function(t){return{expt:t.expt}}),{sendExpt:w})(P);var _=function(){return r.a.createElement(c.a,{store:f},r.a.createElement(o.a,{basename:"/participant-app/"},r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{exact:!0,path:"/",component:Q}),r.a.createElement(p.a,{exact:!0,path:"/success",component:K}),r.a.createElement(p.a,{exact:!0,path:"/expt/:username/:expt",component:C}),r.a.createElement(p.a,{exact:!0,path:"/expt/:username/:expt/:qKey",component:A}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.e575b9bd.chunk.js.map